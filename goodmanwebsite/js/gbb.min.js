function logCallee(e){if(_isDebug){var t,n;if(typeof e==="string"){console.log(e)}else{n=e.callee.toString();n=n.substr("function ".length);n=n.substr(0,n.indexOf("("));console.log(n);for(t=arguments.length-1;t>=0;t--){console.log(arguments[t])}}}}var _isDebug=false;var _basePage="index.aspx";var _maxRouteDistance=80;var _localPropertyJSON;var _localBBXtrasJSON;if(!_isDebug&&!window.console)console={log:function(){}};var GBB=new function(){"use strict";function RegionMarker(e,t,n,r){this.latlng=e;this.propertyCount=n;this.locationName=r;this.setMap(t)}function PropertyMarker(e,t,n){this.latlng=e;this.property=n;this.setMap(t)}function getGeolocatedSubregion(){logCallee("getGeolocatedSubregion");if(Modernizr.geolocation&&!is_firefox){logCallee("This browser supports geolocation!");navigator.geolocation.getCurrentPosition(geo_success,geo_error)}else{logCallee("Geolocation is not supported.");homeRoute();firstRouteEvent=false}}function geo_success(e){logCallee("geolocation="+e.coords.latitude+","+e.coords.longitude);var t=matchGeolocationWithSubregion(e);if(t!=""){applicationState.init();applicationState.setStateBasedOnSubregion(t);navigationRouter.navigate(applicationState.getRouteForThisState(),{trigger:true})}else{homeRoute();firstRouteEvent=false}}function matchGeolocationWithSubregion(e){logCallee("matchGeolocationWithSubregion="+e.coords.latitude+","+e.coords.longitude);var t=Number.POSITIVE_INFINITY;var n="";var r;var i;var s;var o=e.coords.latitude*-1;var u=e.coords.longitude;for(var a=0;a<subregions.length;a++){r=subregions.models[a].attributes.Geo.lat*-1;i=subregions.models[a].attributes.Geo.lng;s=(o-r)*(o-r)+(u-i)*(u-i);if(s<t){t=s;n=subregions.models[a].attributes.SubRegion}logCallee(subregions.models[a].attributes.SubRegion+" "+subregions.models[a].attributes.Geo.lat+" "+subregions.models[a].attributes.Geo.lng)}return n}function geo_error(e){if(e.code==1){logCallee("geo_success - The user denied the request for location information.")}else if(e.code==2){logCallee("geo_success - Your location information is unavailable.")}else if(e.code==3){logCallee("geo_success - The request to get your location timed out.")}else{logCallee("geo_success - An unknown error occurred while requesting your location.")}homeRoute();firstRouteEvent=false}function homeRoute(){logCallee("homeRoute");applicationState.init();applicationState.currentScreen="home";homeScreen()}function createContactUsPanel(){logCallee("createContactUsPanel");$("#contact-us-container").show();initMedia();createContactUsView()}function createContactUsView(){logCallee("createContactUsView");var e=new ContactUsView({model:null});e.render();applicationState.currentProperty=null;navigationRouter.navigate(applicationState.getRouteForThisState(),{trigger:false});var t;t=function(e){logCallee("contact-us closeHandler");$("#contact-us-container").hide();applicationState.currentProperty=null;navigationRouter.navigate(applicationState.getRouteForThisState(),{trigger:false});e.preventDefault()};$("#contact-us a#close").bind("click",t)}function createAboutPanel(){logCallee("createAboutPanel");$("#about-container").show();initMedia();createAboutView()}function createTestimonialItemPanel(){logCallee("createTestimonialItemPanel");$("#testimonialItem-container").show();$("#footer-container").removeClass("ipadfooter");initMedia();createTestimonialItemView()}function createAboutView(){logCallee("createAboutView");var e=new AboutView({model:{mainBlurb:bbxtras.bbxtrasByTypePrimary("about")[0].attributes.Content,main1Blurb:"",main2Blurb:""}});e.render();applicationState.currentProperty=null;navigationRouter.navigate(applicationState.getRouteForThisState(),{trigger:false});var t;t=function(e){logCallee("about closeHandlerf");$("#about-container").hide();applicationState.currentProperty=null;navigationRouter.navigate(applicationState.getRouteForThisState(),{trigger:false});e.preventDefault()};$("#about a#close").bind("click",t)}function createTestimonialItemView(){logCallee("createTestimonialItemView");var e=new TestimonialItemView({model:null});e.render();applicationState.currentProperty=null;navigationRouter.navigate(applicationState.getRouteForThisState(),{trigger:false});var t;t=function(e){logCallee("testimonialItem closeHandler");$("#testimonialItem-container").hide();applicationState.currentProperty=null;navigationRouter.navigate(applicationState.getRouteForThisState(),{trigger:false});e.preventDefault()};$("#testimonialItem-container a.testimonialListVideo").colorbox({rel:"testimonialListVideo",iframe:true,innerWidth:function(){hideCitySelectPanel();var e="500",t=$(window).width();if(t<767){e="420"}else if(t>=768){e="700"}return e},innerHeight:function(){var e="400",t=$(window).width();if(t<767){e="310"}else if(t>=768){e="500"}return e},maxWidth:function(){var e="100%",t=$(window).width();if(t>960){e="60%"}else if(t>=768){e="50%"}return e}});$("#testimonialItem a#close").bind("click",t)}function routeRequestScreen(e){logCallee("routeRequestScreen");try{var t=e.split(",");applicationState.init();applicationState.setStateBasedOnProperty(t[0]);applicationState.currentScreen="route";setMapToSubregion(applicationState.currentSubregion);if(t.length==2){routeB={title:locations[t[1]].title,Geo:new google.maps.LatLng(locations[t[1]].Geo.lat,locations[t[1]].Geo.lng),address:locations[t[1]].address}}else if(t.length>=3){routeB={title:"custom",Geo:new google.maps.LatLng(t[1],t[2]),address:decodeURIComponent(t[3])+decodeURIComponent(t[4])}}initScreen();createSearchPanel();createRouteInfoPanel();if(boundsChangedHandle)google.maps.event.removeListener(boundsChangedHandle);handleDirectionRequest(routeA,routeB.Geo);var n=new google.maps.Marker({map:map,position:routeA,icon:"img/goodman_pointer.png"});var r=new google.maps.Marker({map:map,position:routeB.Geo,icon:"img/pins/destination.png"})}catch(i){logCallee("Error building the route screen: "+i);navigationRouter.navigate("#",{trigger:true})}}function createRouteInfoPanel(){logCallee("createRouteInfoPanel");$("#route-info-container").show();createRouteInfoView()}function createRouteInfoView(){logCallee("createRouteInfoView");var e=new RouteInfoView({model:{propertyname:applicationState.currentProperty.PropertyName,PropertyAddress1:applicationState.currentProperty.PropertyAddress1,PropertyAddress2:applicationState.currentProperty.SubRegion,destination:routeB.title=="custom"?"Custom address":applicationState.currentCity.City+" "+routeB.title,destinationAddress:routeB.address}});e.render();var t;t=function(e){logCallee("route-info exitHandler");navigationRouter.navigate(applicationState.getRouteForThisState(),{trigger:true});e.preventDefault()};$(".route-info-exit").bind("click",t);calculateDistances(new google.maps.LatLng(applicationState.currentProperty.Geo.lat,applicationState.currentProperty.Geo.lng),routeB)}function myComparisonScreen(){logCallee("myComparisonScreen");applicationState.currentScreen="myComparisonScreen";if(!fromClickEvent){applicationState.init();initScreen();setMapToAustralia()}else{initMedia();removePanels()}createSearchPanel();createMyComparisonPanel()}function comparisonScreen(e){logCallee("comparisonScreen");comparisonItems=new ComparisonItemCollection;comparisonView=new ComparisonItemCollectionView;var t=e.split(",");for(var n=0;n<t.length;n++){var r=properties.propertiesByDisplayName(decodeURIComponent(t[n]))[0].attributes;comparisonItems.add(r)}initScreen();createSearchPanel();createComparisonPanel();setMapToAustralia()}function createMyComparisonPanel(){logCallee("createMyComparisonPanel");myComparisonItemCollectionView();$("#mycomparison-list-container").show();$("#mycomparison-list").show()}function createComparisonPanel(){logCallee("createComparisonPanel");comparisonItemCollectionView();$("#comparison-list-container").show()}function setMyComparisonItemCount(e){logCallee("setMyComparisonItemCount");$("#my-properties-count").html(e.toString())}function getMyComparisonItemCount(){logCallee("getMyComparisonItemCount");return myComparisonItems.models.length}function createFooterPanel(){logCallee("createFooterPanel");var e=getMyComparisonItemCount();var t=200;setMyComparisonItemCount(e);var n;n=function(e){logCallee("#mycomparison triggered");if(getMyComparisonItemCount()>0){fromClickEvent=true;$("#footer-container").addClass("ipadfooter");applicationState.currentProperty=null;navigationRouter.navigate("#mycomparison",{trigger:true})}e.preventDefault()};$("#headerMenu ul#menu a#compare").bind("click",n);if(e==0){$("#my-properties-count").hide()}$("#zoomOutButton").bind("click",function(e){logCallee("out");var t=map.getZoom();t--;map.setZoom(t);e.preventDefault()});$("#zoomInButton").bind("click",function(e){logCallee("in");var t=map.getZoom();t++;map.setZoom(t);e.preventDefault()});$("#northButton").bind("click",function(e){logCallee("up");map.panBy(0,-t);e.preventDefault()});$("#southButton").bind("click",function(e){logCallee("down");map.panBy(0,t);e.preventDefault()});$("#eastButton").bind("click",function(e){logCallee("right");map.panBy(t,0);e.preventDefault()});$("#westButton").bind("click",function(e){logCallee("left");map.panBy(-t,0);e.preventDefault()});$("#footer-container").removeClass("hidden")}function myComparisonItemCollectionView(){logCallee("myComparisonItemCollectionView");var e;e=function(e){logCallee("mycomparison-list-container panel closeHandler");$("#mycomparison-list-container").hide();$("#footer-container").removeClass("ipadfooter");if(applicationState.currentSubregion&&applicationState.currentScreen!="route"){createPlaceControlsPanel();createPropertyListPanel();createTestimonialListPanel()}applicationState.currentProperty=null;navigationRouter.navigate(applicationState.getRouteForThisState(),{trigger:false});e.preventDefault()};var t;t=function(e){logCallee("mycomparison-list-container panel clearall");var t=myComparisonItems.models.length;for(var n=t-1;n>=0;n--){myComparisonItems.models[n].clear()}e.preventDefault()};var n;n=function(e){logCallee("myComparison panel emailComparisonHandler");$("#mycomparison-list").hide();createEmailComparisonView();e.preventDefault()};if(myComparisonItems.length>0){$("#email-comparison-trigger").show();$("#email-comparison-trigger").bind("click",n)}else{$("#email-comparison-trigger").hide()}$("#mycomparison-list-container a#close").bind("click",e);$("#mycomparison-list-container a#clearall").bind("click",t)}function comparisonItemCollectionView(){logCallee("comparisonItemCollectionView")}function propertyScreen(){logCallee("propertyScreen");applicationState.currentScreen="propertyScreen";initScreen();setMapToSubregion(applicationState.currentSubregion);createSearchPanel();createPlaceControlsPanel();createPropertyInfoPanel();createPropertyListPanel();createTestimonialListPanel();$("#city-menu-m").siblings().removeClass("active");$("#city-menu-m").addClass("active")}function homeScreen(){logCallee("homeScreen");initScreen();createSearchPanel();setMapToAustralia();clearMobileLocationMenu();logCallee("@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ firstRouteEvent="+firstRouteEvent);createCitySelectPanel();$("#iphoneMenu").hide();$("#city-select-container").removeClass("geoSlide");if(!firstRouteEvent){$("#city-select-container").addClass("iPhoneRemove")}}function clearMobileLocationMenu(){$("#iphoneMenu #menu-2-m").hide();$("#city-menu-m").siblings().removeClass("active");$("#city-menu-m").addClass("active")}function setMapToAustralia(){setMap(new google.maps.LatLng(-28,134),4,false);createCityPin(cities.citiesByName("Perth")[0].attributes);createCityPin(cities.citiesByName("Adelaide")[0].attributes);createCityPin(cities.citiesByName("Brisbane")[0].attributes);createCityPin(cities.citiesByName("Sydney")[0].attributes);createCityPin(cities.citiesByName("Canberra")[0].attributes);createCityPin(cities.citiesByName("Melbourne")[0].attributes)}function createCityPin(e){logCallee("createCityPin");var t=applicationState.filteredProperties.propertiesByCity(e.City).length;if(t>0){marker=new RegionMarker(new google.maps.LatLng(e.Geo.lat,e.Geo.lng),map,t.toString(),e.City);google.maps.event.addListener(marker,"click",function(){logCallee("CityPin click");applicationState.setStateBasedOnCity(e.City);navigationRouter.navigate(applicationState.getRouteForThisState(),{trigger:true})});regionPins.push(marker)}}function cityScreen(){logCallee("cityScreen");initScreen();createSearchPanel();setMapToCity(applicationState.currentCity);if(firstRouteEvent){createCitySelectPanel();$("#city-select-container").removeClass("geoSlide")}$("#iphoneMenu").show();$("#region-menu-m").siblings().removeClass("active");$("#region-menu-m").addClass("active")}function setMapToCity(e){logCallee("setMapToCity");setMap(null);maxSouth=Number.POSITIVE_INFINITY;maxNorth=Number.NEGATIVE_INFINITY;maxWest=Number.POSITIVE_INFINITY;maxEast=Number.NEGATIVE_INFINITY;if(applicationState.filteredRegions.models.length==0){setMap(new google.maps.LatLng(e.Geo.lat,e.Geo.lng),10,false)}else if(applicationState.filteredRegions.models.length==1){setMap(new google.maps.LatLng(e.Geo.lat,e.Geo.lng),10,false);createRegionPin(applicationState.filteredRegions.models[0].attributes)}else{for(var t=0;t<applicationState.filteredRegions.models.length;t++){currentGeo=applicationState.filteredRegions.models[t].attributes.Geo;if(currentGeo.lat<maxSouth){maxSouth=currentGeo.lat}if(currentGeo.lng<maxWest){maxWest=currentGeo.lng}if(currentGeo.lat>maxNorth){maxNorth=currentGeo.lat}if(currentGeo.lng>maxEast){maxEast=currentGeo.lng}createRegionPin(applicationState.filteredRegions.models[t].attributes)}maxWest-=.5*(maxEast-maxWest);maxEast+=.5*(maxEast-maxWest);maxNorth-=.5*(maxSouth-maxNorth);maxSouth+=.5*(maxSouth-maxNorth);southWest=new google.maps.LatLng(maxSouth,maxWest);northEast=new google.maps.LatLng(maxNorth,maxEast);bounds=new google.maps.LatLngBounds(southWest,northEast);map.fitBounds(bounds)}}function createRegionPin(e){logCallee("createRegionPin");var t=applicationState.filteredProperties.propertiesByRegion(e.Region).length;if(t>0){marker=new RegionMarker(new google.maps.LatLng(e.Geo.lat,e.Geo.lng),map,"",e.Region);google.maps.event.addListener(marker,"click",function(){logCallee("RegionPin click");applicationState.setStateBasedOnRegion(e.Region);navigationRouter.navigate(applicationState.getRouteForThisState(),{trigger:true})});regionPins.push(marker)}}function regionScreen(){logCallee("regionScreen");initScreen();createSearchPanel();setMapToRegion(applicationState.currentRegion);if(firstRouteEvent){createCitySelectPanel();$("#city-select-container").removeClass("geoSlide")}$("#iphoneMenu").show();$("#subregion-menu-m").siblings().removeClass("active");$("#subregion-menu-m").addClass("active")}function setMapToRegion(e){logCallee("setMapToRegion");setMap(null);maxSouth=Number.POSITIVE_INFINITY;maxNorth=Number.NEGATIVE_INFINITY;maxWest=Number.POSITIVE_INFINITY;maxEast=Number.NEGATIVE_INFINITY;if(applicationState.filteredSubregions.models.length==0){setMap(new google.maps.LatLng(e.Geo.lat,e.Geo.lng),13,false)}else if(applicationState.filteredSubregions.models.length==1){setMap(new google.maps.LatLng(e.Geo.lat,e.Geo.lng),13,false);createSubregionPin(applicationState.filteredSubregions.models[0].attributes)}else{for(var t=0;t<applicationState.filteredSubregions.models.length;t++){currentGeo=applicationState.filteredSubregions.models[t].attributes.Geo;if(currentGeo.lat<maxSouth){maxSouth=currentGeo.lat}if(currentGeo.lng<maxWest){maxWest=currentGeo.lng}if(currentGeo.lat>maxNorth){maxNorth=currentGeo.lat}if(currentGeo.lng>maxEast){maxEast=currentGeo.lng}createSubregionPin(applicationState.filteredSubregions.models[t].attributes)}maxNorth-=.2*(maxSouth-maxNorth);maxSouth+=.2*(maxSouth-maxNorth);southWest=new google.maps.LatLng(maxSouth,maxWest);northEast=new google.maps.LatLng(maxNorth,maxEast);bounds=new google.maps.LatLngBounds(southWest,northEast);map.fitBounds(bounds)}}function createSubregionPin(e){logCallee("subregion");var t=applicationState.filteredProperties.propertiesBySubregion(e.SubRegion).length;if(t>0){marker=new RegionMarker(new google.maps.LatLng(e.Geo.lat,e.Geo.lng),map,"",e.SubRegion);google.maps.event.addListener(marker,"click",function(){logCallee("subregion pin click");applicationState.setStateBasedOnSubregion(e.SubRegion);navigationRouter.navigate(applicationState.getRouteForThisState(),{trigger:true})});regionPins.push(marker)}}function subregionScreen(){logCallee("subregionScreen");initScreen();createSearchPanel();createPropertyListPanel();createPlaceControlsPanel();createTestimonialListPanel();setMapToSubregion(applicationState.currentSubregion);if(firstRouteEvent){createCitySelectPanel();$("#city-select-container").addClass("geoSlide");firstSubregionRouteEvent=false}else{if(firstSubregionRouteEvent){$("#placesTooltip").show();firstSubregionRouteEvent=false}else{$("#placesTooltip").hide()}}$("#city-menu-m").siblings().removeClass("active");$("#city-menu-m").addClass("active")}function setMapToSubregion(e){logCallee("setMapToSubregion");setMap(null);maxSouth=Number.POSITIVE_INFINITY;maxNorth=Number.NEGATIVE_INFINITY;maxWest=Number.POSITIVE_INFINITY;maxEast=Number.NEGATIVE_INFINITY;var t=new Properties(applicationState.filteredProperties.propertiesBySubregion(e.SubRegion));if(t.models.length==0){setMap(new google.maps.LatLng(e.Geo.lat,e.Geo.lng),16,false)}if(t.models.length==1){setMap(new google.maps.LatLng(t.models[0].attributes.Geo.lat,t.models[0].attributes.Geo.lng),16,false)}for(var n=0;n<applicationState.filteredProperties.models.length;n++){if(applicationState.filteredProperties.models[n].attributes.SubRegion==e.SubRegion){currentGeo=new google.maps.LatLng(applicationState.filteredProperties.models[n].attributes.Geo.lat,applicationState.filteredProperties.models[n].attributes.Geo.lng);if(currentGeo.lat()<maxSouth){maxSouth=currentGeo.lat()}if(currentGeo.lng()<maxWest){maxWest=currentGeo.lng()}if(currentGeo.lat()>maxNorth){maxNorth=currentGeo.lat()}if(currentGeo.lng()>maxEast){maxEast=currentGeo.lng()}}createPropertyPin(applicationState.filteredProperties.models[n].attributes)}if(t.models.length>1){maxWest-=.7*(maxEast-maxWest);maxEast+=.7*(maxEast-maxWest);maxNorth-=.2*(maxSouth-maxNorth);southWest=new google.maps.LatLng(maxSouth,maxWest);northEast=new google.maps.LatLng(maxNorth,maxEast);bounds=new google.maps.LatLngBounds(southWest,northEast);map.fitBounds(bounds)}boundsChangedHandle=google.maps.event.addListener(map,"bounds_changed",boundsChangedFunction)}function boundsChangedFunction(){logCallee("@@@"+map.getZoom());if(map.getZoom()>13){logCallee("boundsChangedFunction called");var e;var t=map.getBounds();var n=0;var r=[];var i=0;var s=0;var o=applicationState.filteredProperties.models.length;for(var u=0;u<o;u++){try{e=new google.maps.LatLng(applicationState.filteredProperties.models[u].attributes.Geo.lat,applicationState.filteredProperties.models[u].attributes.Geo.lng);if(t.contains(e)){n++;r.push(e)}}catch(a){}}if(applicationState.insideCount!=n){applicationState.insideCount=n;if(n==0){logCallee("##################### boundsChangedFunction - we now have 0 properties inside the viewport")}else{logCallee("##################### boundsChangedFunction - we now have "+applicationState.insideCount+" properties inside the viewport");for(var f=0;f<r.length;f++){i+=r[f].lat();s+=r[f].lng()}i=i/r.length;s=s/r.length;currentWeightedCentre=new google.maps.LatLng(i,s);initPlacesVars();placesRequestFunction()}}}else{applicationState.insideCount=0;initPlacesVars()}}function createPropertyPin(e){if(!isTouch&&!is_safari){marker=new PropertyMarker(new google.maps.LatLng(e.Geo.lat,e.Geo.lng),map,e)}else{marker=new google.maps.Marker({map:map,position:new google.maps.LatLng(e.Geo.lat,e.Geo.lng),icon:"img/goodman_pointer.png"})}google.maps.event.addListener(marker,"click",function(){logCallee("Property Pin clicked");applicationState.setStateBasedOnProperty(e);navigationRouter.navigate(applicationState.getRouteForThisState(),{trigger:true})});propertyPins.push(marker)}function createSearchPanel(){logCallee("createSearchPanel");createCityDDListView();createRegionDDListView();createSubregionDDListView();createBuildingTypeDDListView();createAreaDDListView();var e;e=function(e){logCallee("contactUsHandler");_gaq.push(["_trackEvent","Contact page","clicked"]);_gaq.push(["_trackPageview","vp/Contact page"]);removePanels();createContactUsPanel();if(applicationState.currentProperty){applicationState.currentProperty=null;navigationRouter.navigate(applicationState.getRouteForThisState(),{trigger:false})}if(applicationState.currentSubregion&&applicationState.currentScreen!="route"){createPlaceControlsPanel();createPropertyListPanel();createTestimonialListPanel()}e.preventDefault()};var t;t=function(e){logCallee("aboutHandler");_gaq.push(["_trackEvent","About page","clicked"]);_gaq.push(["_trackPageview","vp/About page"]);removePanels();createAboutPanel();if(applicationState.currentProperty){applicationState.currentProperty=null;navigationRouter.navigate(applicationState.getRouteForThisState(),{trigger:false})}if(applicationState.currentSubregion&&applicationState.currentScreen!="route"){createPlaceControlsPanel();createPropertyListPanel();createTestimonialListPanel()}e.preventDefault()};var n;n=function(e){logCallee("homeHandler");if(applicationState.currentScreen=="home"){removePanels();createCitySelectPanel();e.preventDefault()}};var r;r=function(e){logCallee("testimonialItemHandler");_gaq.push(["_trackEvent","testimonialItem panel","clicked"]);_gaq.push(["_trackPageview","vp/testimonials"]);removePanels();createTestimonialItemPanel();if(applicationState.currentProperty){applicationState.currentProperty=null;navigationRouter.navigate(applicationState.getRouteForThisState(),{trigger:false})}if(applicationState.currentSubregion&&applicationState.currentScreen!="route"){createPlaceControlsPanel();createPropertyListPanel();createTestimonialListPanel()}e.preventDefault()};$("#footer li#contact-menu").bind("click",e);$("#footer li#about-menu").bind("click",t);$("#search-container ul#menu li#testimonial-item").bind("click",r);$("#gmLogo").bind("click",n);$("#home-menu").bind("click",n);$("#search-container").show();$("#contact").bind("click",e);$("#aboutIphone").bind("click",t);applicationState.setCrumbs()}function validateEmail(e){var t=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}function OnComplete(e){logCallee("email OnComplete: "+e);document.getElementById("gbb_sender_first_name").value="";document.getElementById("gbb_sender_last_name").value="";document.getElementById("gbb_sender_company").value="";document.getElementById("gbb_sender_email").value="";document.getElementById("gbb_sender_message").value=""}function OnCompleteEP(e){logCallee("email OnCompleteEP: "+e);document.getElementById("gbb_ep_recipient_name").value="";document.getElementById("gbb_ep_recipient_email").value="";document.getElementById("gbb_ep_sender_name").value="";document.getElementById("gbb_ep_sender_email").value="";document.getElementById("gbb_ep_note").value=""}function OnCompleteEC(e){logCallee("email OnCompleteEC: "+e);document.getElementById("gbb_ec_recipient_name").value="";document.getElementById("gbb_ec_recipient_email").value="";document.getElementById("gbb_ec_sender_name").value="";document.getElementById("gbb_ec_sender_email").value="";document.getElementById("gbb_ec_note").value=""}function OnTimeOut(e){logCallee("email OnTimeOut: "+e)}function OnError(e){logCallee("email OnError: "+e)}function createCitySelectPanel(){logCallee("createCitySelectPanel");createCitySelectView();$("#city-select-container").show()}function hideCitySelectPanel(){logCallee("hideCitySelectPanel");$("#city-select-container").hide();$("#city-select-container a#close").unbind();$("#welcome-testimonial-list a").unbind()}function createCitySelectView(){logCallee("createCitySelectView");var e=new CitySelectView({model:cities});e.render();var t;t=function(e){logCallee("city-select-container closeHandler");hideCitySelectPanel();$("#iphoneMenu").show();initMedia();e.preventDefault()};$("#city-select-container a#close").bind("click",t);var n=Math.floor(Math.random()*allPodTestimonials.length);if(n===allPodTestimonials.length)n--;$("#welcome-testimonial-list").cycle({fx:"fade",speed:600,startingSlide:n,timeout:8e3});var r;r=function(e){logCallee("testimonialItemHandler");_gaq.push(["_trackEvent","welcome panel video","clicked"]);_gaq.push(["_trackPageview","vp/testimonialsViaWelcomePanel"]);removePanels();createTestimonialItemPanel();if(applicationState.currentProperty){applicationState.currentProperty=null;navigationRouter.navigate(applicationState.getRouteForThisState(),{trigger:false})}if(applicationState.currentSubregion&&applicationState.currentScreen!="route"){createPlaceControlsPanel();createPropertyListPanel();createTestimonialListPanel()}e.preventDefault()};$("#welcome-testimonial-list li").bind("click",r)}function createPropertyInfoPanel(){logCallee("createPropertyInfoPanel");createPropertyInfoView();$("#property-info-container").show();$("#property-info").show();$("#footer-container").removeClass("ipadfooter")}function createGooglePlaceInfoPanel(e){logCallee("createGooglePlaceInfoPanel");$("#google-place-info-container").show();createGooglePlaceInfoView(e)}function createGoodmanPlaceInfoPanel(e){logCallee("createGoodmanPlaceInfoPanel");$("#goodman-place-info-container").show();createGoodmanPlaceInfoView(e)}function createRtaPlaceInfoPanel(e){logCallee("createRtaPlaceInfoPanel");$("#rtacam-place-info-container").show();createRtaPlaceInfoView(e)}function createPropertyInfoView(){logCallee("createPropertyInfoView");var e=0;if(applicationState.currentProperty.SitePlanImages!=""){e=applicationState.currentProperty.SitePlanImages.split(",").length}else if(applicationState.currentProperty.CarouselImages!=""){e=applicationState.currentProperty.CarouselImages.split(",").length}var t=0;if(applicationState.currentProperty.VideoURLs!=""){t=applicationState.currentProperty.VideoURLs.split(",").length}var n=applicationState.currentProperty;n.ImagesCount=e;n.VideoURLsCount=t;var r=new PropertyInfoView({model:n});r.render();var i;i=function(e){logCallee("property-info panel closeHandler");$("#property-info-container").hide();$("#property-info").hide();applicationState.currentProperty=null;navigationRouter.navigate(applicationState.getRouteForThisState(),{trigger:false});e.preventDefault()};$("#property-info a#close").bind("click",i);var s;s=function(e){logCallee("property-info panel galleryHandler");_gaq.push(["_trackEvent","Image gallery",applicationState.currentProperty.DisplayName]);if(firstEventForSession){_gaq.push(["_trackEvent","firstEventForSession","Image gallery"]);firstEventForSession=false}$("#property-info").hide();createGalleryView();e.preventDefault()};$(".propertySidebarGallery a").bind("click",s);logCallee("ImagesCount = "+e);if(e>0){$(".propertySidebarOptions #photosLi").bind("click",s).show();var o=applicationState.currentProperty.SitePlanImages.split(",").lengh>0?applicationState.currentProperty.SitePlanImages.split(","):applicationState.currentProperty.CarouselImages.split(",");for(var u=0;u<2&&u<o.length;u++){$('<li><img src="'+$.trim(o[u])+'" width="400" /></li>').appendTo($("#propertThumbnailPanel #propertThumbnails"))}}else $(".propertySidebarOptions #photosLi").hide();if(t>0)$(".propertySidebarOptions #videosLi").bind("click",s).show();else $(".propertySidebarOptions #videosLi").hide();displayLeaseStatus(".propertySidebarHeader .propertyStatus",applicationState.currentProperty.IsLeased,applicationState.currentProperty.ShowAsNewUntil);displayLeaseStatus(".propertyContent #propertyInfoNewOrLeased",applicationState.currentProperty.IsLeased,applicationState.currentProperty.ShowAsNewUntil);var a=[];var f=[];var l=[];if(applicationState.currentProperty.Downloads!=""){a=applicationState.currentProperty.Downloads.split(",")}for(var c=0;c<a.length;c++){var h=a[c];var p=$.trim(a[c].split("|")[0]);var d=$.trim(a[c].split("|")[1]);if(p.indexOf("brochure")!=-1||p.indexOf("Brochure")!=-1||p.toLowerCase().indexOf("information memorandum")!=-1){f.push({identifier:p,url:d})}else if(d.indexOf(".pdf")!=-1){l.push({identifier:p,url:d})}}var v;v=function(n){logCallee("property-info panel multipleDownloadHandler");var r=$(this).parent();var i="";if(!r.siblings().is(":visible")){$("#downloadList").hide();r.siblings().show();$("#viewOnMapLi").hide();if(f.length==0){$("#brochureLi").hide()}if(l.length==0){$("#floorplanLi").hide()}if(e==0){$(".propertySidebarOptions #photosLi").hide()}if(t==0){$(".propertySidebarOptions #videosLi").hide()}}else{if($(this).attr("class")=="brochureWhiteIcon"&&f.length>0){for(var s=0;s<f.length;s++){i+="<li><a href='"+f[s].url+"' id='"+f[s].identifier+"' target='_blank'>"+f[s].identifier+"</a></li>"}$("#downloadList").html(i);$("#downloadList").show();$("#downloadList a").unbind();$("#downloadList a").bind("click",m);r.siblings().hide()}else if($(this).attr("class")=="floorplanWhiteIcon"&&l.length>0){for(var s=0;s<l.length;s++){i+="<li><a href='"+l[s].url+"' id='"+l[s].identifier+"' target='_blank'>"+l[s].identifier+"</a></li>"}$("#downloadList").html(i);$("#downloadList").show();$("#downloadList a").unbind();$("#downloadList a").bind("click",m);r.siblings().hide()}else{}}n.preventDefault()};var m;m=function(e){logCallee("!!!!!!!!!!!!!!!!singleDownloadHandler "+this.id);_gaq.push(["_trackEvent","Downloads",applicationState.currentProperty.DisplayName+" "+this.id]);if(firstEventForSession){_gaq.push(["_trackEvent","firstEventForSession","Downloads"]);firstEventForSession=false}return true};if(f.length>1){$("#brochureLi").show();$(".brochureWhiteIcon").bind("click",v)}else if(f.length==1){$("#brochureLi").show();$(".brochureWhiteIcon").attr("href",f[0].url);$(".brochureWhiteIcon").attr("id",f[0].identifier);$(".brochureWhiteIcon").bind("click",m)}else{$("#brochureLi").hide()}if(l.length>1){$("#floorplanLi").show();$(".floorplanWhiteIcon").bind("click",v)}else if(l.length==1){$("#floorplanLi").show();$(".floorplanWhiteIcon").attr("href",l[0].url);$(".floorplanWhiteIcon").attr("id",l[0].identifier);$(".floorplanWhiteIcon").bind("click",m)}else{$("#floorplanLi").hide()}var g;g=function(e){logCallee("property-info panel emailPropertyHandler");$("#property-info").hide();createEmailPropertyView();e.preventDefault()};$("#email-property-trigger").bind("click",g);var y;y=function(e){logCallee("comparisonHandler");var t=myComparisonItems.itemsByDisplayName(applicationState.currentProperty.DisplayName).length;if(myComparisonItems.models.length<4&&t==0){_gaq.push(["_trackEvent","My Properties",applicationState.currentProperty.DisplayName]);if(firstEventForSession){_gaq.push(["_trackEvent","firstEventForSession","My Properties"]);firstEventForSession=false}myComparisonItems.create(applicationState.currentProperty);setMyComparisonItemCount(getMyComparisonItemCount());$("#my-properties-count").show()}e.preventDefault()};$("#property-info a#comparison-add").bind("click",y);if(Modernizr.localstorage||Modernizr.sessionstorage){$("#comparison-add").show()}else{$("#comparison-add").hide()}var b;b=function(e){logCallee("property-info routeHandler");_gaq.push(["_trackEvent","Distance and routes",applicationState.currentProperty.DisplayName+" to "+this.id]);if(firstEventForSession){_gaq.push(["_trackEvent","firstEventForSession","Distance and routes"]);firstEventForSession=false}var t=applicationState.currentCity.City;var n="#route="+applicationState.currentProperty.DisplayName+",";if(this.id=="custom"){$("#custom-route-input").toggle()}else{n+=this.id+t;navigationRouter.navigate(n,{trigger:true})}e.preventDefault()};$(".property-info-route").bind("click",b);calculateDistances(new google.maps.LatLng(applicationState.currentProperty.Geo.lat,applicationState.currentProperty.Geo.lng),applicationState.currentCity.City);var w=document.getElementById("searchTextField");$("#searchTextField").unbind();$("#searchTextField").bind("keypress",function(e){$(".pac-container").css("z-index","9999");logCallee("searchTextField keypressed="+e.keyCode);if(e.keyCode==13){e.preventDefault()}});var E={componentRestrictions:{country:"au"}};var S=new google.maps.places.Autocomplete(w,E);var x=new google.maps.LatLngBounds(new google.maps.LatLng(-43.957589,112.191063),new google.maps.LatLng(-11.000993,154.027001));S.setBounds(x);S.bindTo("bounds",map);google.maps.event.addListener(S,"place_changed",function(){var e=S.getPlace();if(e.geometry){logCallee("user entered her own route "+e);var t="#route="+applicationState.currentProperty.DisplayName+",";t+=e.geometry.location.lat()+","+e.geometry.location.lng()+","+encodeURIComponent(e.formatted_address);navigationRouter.navigate(t,{trigger:true})}});$("#propertyInfoPrintFooter #propertyUrl").text(applicationState.currentBaseURL+_basePage+"#displayname="+applicationState.currentProperty.DisplayName);if(applicationState.currentProperty.Geo){$('<img src="http://maps.google.com/maps/api/staticmap?size=560x250&zoom=16&sensor=false&markers=icon:http://tinyurl.com/b7455xt|shadow:false|'+applicationState.currentProperty.Geo.lat+","+applicationState.currentProperty.Geo.lng+'"/>').appendTo($("#propertyInfoPrintGoogleMap"))}else{$("#propertyInfoPrintMoreDetailleft").hide()}if(l.length>0)$("<li>Building plans</li>").appendTo($("#propertyInfoAvailableOptionPanel #propertyInfoAvailableOptions"));if(f.length>0)$("<li>Leasing brochure</li>").appendTo($("#propertyInfoAvailableOptionPanel #propertyInfoAvailableOptions"));if(e>0)$("<li>Images</li>").appendTo($("#propertyInfoAvailableOptionPanel #propertyInfoAvailableOptions"));if(t>0)$("<li>Videos</li>").appendTo($("#propertyInfoAvailableOptionPanel #propertyInfoAvailableOptions"));if($("#propertyInfoAvailableOptionPanel #propertyInfoAvailableOptions li").length==0)$("#propertyInfoAvailableOptionPanel").html("")}function createGalleryView(){logCallee("createGalleryView");var e=new GalleryView({model:applicationState.currentProperty});e.render();var t="";var n=[];var r=[];if(applicationState.currentProperty.SitePlanImages!=""){n=applicationState.currentProperty.SitePlanImages.split(",")}else if(applicationState.currentProperty.CarouselImages!=""){n=applicationState.currentProperty.CarouselImages.split(",")}if(n.length>0){$("#galleryPhotoContent").show();for(var i=0;i<n.length;i++){t+="<li><a href='"+$.trim(n[i])+"' rel='lightbox' class='photo'><img src='"+$.trim(n[i])+"' /></a></li>"}$("#galleryContentList").html(t)}else{$("#galleryPhotoContent").hide()}t="";if(applicationState.currentProperty.VideoURLs!=""){r=applicationState.currentProperty.VideoURLs.split(",")}if(r.length>0){$("#galleryVideoContent").show();for(var i=0;i<r.length;i++){t+="<li><a href='http://www.youtube.com/embed/"+r[i]+"?rel=0&wmode=transparent' rel='lightbox' class='youtube'><img src='http://i2.ytimg.com/vi/"+r[i]+"/default.jpg'/></a></li>"}$("#galleryVideoContentList").html(t)}else{$("#galleryVideoContent").hide()}var s;s=function(e){logCallee("gallery closeHandler");$("#gallery").hide();$("#property-info").show();e.preventDefault()};$("#gallery a#close").bind("click",s);$("#gallery").show();$("#gallery a.photo").colorbox({rel:"lightbox",maxWidth:function(){var e="100%",t=$(window).width();if(t>960){e="70%"}else if(t>=768){e="80%"}return e}});$("#gallery a.youtube").colorbox({rel:"lightbox",iframe:true,innerWidth:function(){var e="500",t=$(window).width();if(t<767){e="420"}else if(t>=768){e="700"}return e},innerHeight:function(){var e="400",t=$(window).width();if(t<767){e="310"}else if(t>=768){e="500"}return e},maxWidth:function(){var e="100%",t=$(window).width();if(t>960){e="60%"}else if(t>=768){e="50%"}return e}})}function createEmailPropertyView(){logCallee("createEmailPropertyView");var e=applicationState.currentProperty;e.PropertyURL=applicationState.currentBaseURL+_basePage+"#displayname="+applicationState.currentProperty.DisplayName;var t=new EmailPropertyView({model:e});t.render();var n;n=function(e){logCallee("EmailPropertyView closeHandler");$("#email-property").hide();$("#property-info").show();e.preventDefault()};$("#email-property a#close").bind("click",n);$("#email-property").show()}function createEmailComparisonView(){logCallee("createEmailComparisonView");var e=new EmailComparisonView({model:null});e.render();var t;t=function(e){logCallee("EmailComparisonView closeHandler");$("#email-comparison").hide();$("#mycomparison-list").show();e.preventDefault()};$("#email-comparison a#close").bind("click",t);$("#email-comparison").show()}function createGooglePlaceInfoView(e){logCallee("createGooglePlaceInfoView");var t=new GooglePlaceInfoView({model:e});t.render();var n;n=function(e){logCallee("google-place-info panel closeHandler");$("#google-place-info-container").hide();e.preventDefault()};$("#google-place-info a#close").bind("click",n)}function createGoodmanPlaceInfoView(e){logCallee("createGoodmanPlaceInfoView");var t=new GoodmanPlaceInfoView({model:e});t.render();var n;n=function(e){logCallee("goodman-place-info panel closeHandler");$("#goodman-place-info-container").hide();e.preventDefault()};$("#goodman-place-info a#close").bind("click",n)}function createRtaPlaceInfoView(e){logCallee("createRtaPlaceInfoView");var t=new RtacamPlaceInfoView({model:e});t.render();var n;n=function(e){logCallee("rtacam-place-info panel closeHandler");$("#rtacam-place-info-container").hide();e.preventDefault()};$("#rtacam-place-info a#close").bind("click",n);var r;r=function(t){logCallee("rtacam-place-info panel refreshHandler");$("#rtacam-place-info #view img").attr({src:e.href})};$("#rtacam-place-info #refresh").bind("click",r)}function createTestimonialListPanel(){logCallee("createTestimonialListPanel");var e=new TestimonialListView({model:customerPodTestimonials});e.render();$("#testimonial-list-container").show();var t=Math.floor(Math.random()*customerPodTestimonials.length);if(t===customerPodTestimonials.length)t--;$("#testimonial-list").cycle({fx:"fade",speed:600,timeout:10500,next:"#nextSlide",prev:"#prevSlide",startingSlide:t});$("#testimonial-list-container a.testtestimonialVideo").colorbox({rel:"testtestimonial",iframe:true,innerWidth:function(){hideCitySelectPanel();var e="500",t=$(window).width();if(t<767){e="420"}else if(t>=768){e="700"}return e},innerHeight:function(){var e="400",t=$(window).width();if(t<767){e="310"}else if(t>=768){e="500"}return e},maxWidth:function(){var e="100%",t=$(window).width();if(t>960){e="60%"}else if(t>=768){e="50%"}return e}});var n;n=function(e){logCallee("customerPodTestimonials video clicked "+this.href);_gaq.push(["_trackEvent","Customer Testimonial Video","clicked"]);e.preventDefault()};$("#testimonial-list li a").bind("click",n)}function createPropertyListPanel(){logCallee("createPropertyListPanel");var e=new FeaturedListView({model:applicationState.getFeaturedProperties()});e.render();var t=new PropertyListView({model:new Properties(applicationState.filteredProperties.propertiesBySubregion(applicationState.currentSubregion.SubRegion))});t.render();$("#property-list-container").show();var n;n=function(e){var t=decodeURIComponent(this.id);logCallee("Property list item clicked: "+t);applicationState.setStateBasedOnProperty(t);navigationRouter.navigate(applicationState.getRouteForThisState(),{trigger:true});e.preventDefault()};$("#property-list li a").bind("click",n);var r;r=function(e){var t=decodeURIComponent(this.id);logCallee("Featured list item clicked: "+t);_gaq.push(["_trackEvent","Featured property",t]);if(firstEventForSession){_gaq.push(["_trackEvent","firstEventForSession","Featured property"]);firstEventForSession=false}applicationState.setStateBasedOnProperty(t);navigationRouter.navigate(applicationState.getRouteForThisState(),{trigger:true});e.preventDefault()};$("#featured-list li a").bind("click",r)}function createPlaceControlsPanel(){logCallee("createPlaceControlsPanel");$("#place-controls-container .controller").bind("click",function(){logCallee(this.id);_gaq.push(["_trackEvent","Filters",this.id]);if(firstEventForSession){_gaq.push(["_trackEvent","firstEventForSession","Filters"]);firstEventForSession=false}var e=placePins.length;if($("#"+this.id).hasClass("off")){for(var t=0;t<e;t++){if(placePins[t].grouping_==this.id){placePins[t].setMap(map)}}$("#"+this.id).removeClass();$("#"+this.id).addClass("controller");$("#"+this.id).addClass("button-style");$("#"+this.id).addClass(this.id+"WhiteIcon")}else{for(var t=0;t<e;t++){if(placePins[t].grouping_==this.id){placePins[t].setMap(null)}}$("#"+this.id).removeClass();$("#"+this.id).addClass("controller");$("#"+this.id).addClass("button-style");$("#"+this.id).addClass(this.id+"WhiteIcon");$("#"+this.id).addClass("off")}});$("#place-controls-container").show()}function createCityDDListView(){logCallee("createCityDDListView");var e=new Cities;for(var t=0;t<cities.models.length;t++){if(applicationState.filteredProperties.propertiesByCity(cities.models[t].attributes.City).length>0){e.add(cities.models[t].attributes)}}var n,r;r=new CityDDListViewM({model:e});r.render();n=new CityDDListView({model:e});n.render();var i;i=function(e){var t=$(e.target).text();logCallee("cityDDListHandler "+t);applicationState.setStateBasedOnCity(t);navigationRouter.navigate(applicationState.getRouteForThisState(),{trigger:true})};$("#city-dropdown-menu-m li").bind("click",i);$("#city-dropdown-menu li").bind("click",i)}function createRegionDDListView(){logCallee("createRegionDDListView");var e=new Regions;for(var t=0;t<applicationState.filteredRegions.models.length;t++){if(applicationState.filteredProperties.propertiesByRegion(applicationState.filteredRegions.models[t].attributes.Region).length>0){e.add(applicationState.filteredRegions.models[t].attributes)}}var n,r;r=new RegionDDListViewM({model:e});r.render();n=new RegionDDListView({model:e});n.render();var i;i=function(e){var t=$(e.target).text();logCallee("regionDDListHandler "+t);$("#city-menu-m").removeClass("active");$("#region-menu-m").removeClass("active");$("#subregion-menu-m").addClass("active");applicationState.setStateBasedOnRegion(t);navigationRouter.navigate(applicationState.getRouteForThisState(),{trigger:true})};$("#region-dropdown-menu-m li").bind("click",i);$("#region-dropdown-menu li").bind("click",i)}function createSubregionDDListView(){logCallee("createSubregionDDListView");var e=new Subregions;for(var t=0;t<applicationState.filteredSubregions.models.length;t++){if(applicationState.filteredProperties.propertiesBySubregion(applicationState.filteredSubregions.models[t].attributes.SubRegion).length>0){e.add(applicationState.filteredSubregions.models[t].attributes)}}var n,r;r=new SubregionDDListViewM({model:e});r.render();n=new SubregionDDListView({model:e});n.render();var i;i=function(e){var t=$(e.target).text();logCallee("subregionDDListHandler "+t);$("#subregion-menu-m").removeClass("active");$("#region-menu-m").removeClass("active");$("#city-menu-m").addClass("active");$("#iphoneMenu").hide();$("#property-list-container").show();applicationState.setStateBasedOnSubregion(t);navigationRouter.navigate(applicationState.getRouteForThisState(),{trigger:true})};$("#subregion-dropdown-menu-m li").bind("click",i);$("#subregion-dropdown-menu li").bind("click",i)}function createAreaDDListView(){logCallee("createAreaDDListView");var e=validAreasForThisApplicationState();var t,n;n=new AreaDDListViewM({model:e});n.render();t=new AreaDDListView({model:e});t.render();var r;r=function(e){var t=$(e.target).text();logCallee("areaDDListHandler "+t);applicationState.setStateBasedOnArea(t);applicationState.currentProperty=null;navigationRouter.navigate(applicationState.getRouteForThisState(),{trigger:true})};$("#area-dropdown-menu-m li").bind("click",r);$("#iphoneMenu #menu-1-m").show();$("#iphoneMenu #menu-2-m").hide();$("#area-dropdown-menu li").bind("click",r)}function validAreasForThisApplicationState(){var e=new AreaDDItems;e.add(areas.areasByName("All")[0].attributes);var t;var n;var r=properties;if(applicationState.currentSubregion)r=new Properties(r.propertiesBySubregion(applicationState.currentSubregion.SubRegion));else if(applicationState.currentRegion)r=new Properties(r.propertiesByRegion(applicationState.currentRegion.Region));var i=r.length;for(var s=0;s<i;s++){var o=false;if(applicationState.currentBuildingType&&applicationState.currentBuildingType.BuildingTypeName!="All"){n=r.models[s].attributes.PropertyType.split(",");for(var u=0;u<n.length;u++){if(applicationState.currentBuildingType.BuildingTypeName=="Developments"||applicationState.currentBuildingType.BuildingTypeName==$.trim(n[u])){o=true;break}}}else{o=true}if(o){t=r.models[s].attributes.PropertyRange.split("|");for(var u=0;u<t.length;u++){var a=t[u];if(e.areasByName(t[u]).length==0){e.add(areas.areasByName(a)[0].attributes)}}}}return e}function createBuildingTypeDDListView(){logCallee("createBuildingTypeDDListView");var e=validBuildingTypesForThisApplicationState();var t,n;n=new BuildingTypeDDListViewM({model:e});n.render();t=new BuildingTypeDDListView({model:e});t.render();var r;r=function(e){var t=$(e.target).text();logCallee("buildingTypeDDListHandler "+t);applicationState.setStateBasedOnBuildingType(t);navigationRouter.navigate(applicationState.getRouteForThisState(),{trigger:true})};$("#buildingtype-dropdown-menu-m li").bind("click",r);$("#iphoneMenu #menu-1-m").show();$("#iphoneMenu #menu-2-m").hide();$("#buildingtype-dropdown-menu li").bind("click",r)}function validBuildingTypesForThisApplicationState(){var e=new BuildingTypeDDItems;e.add(buildingtypes.buildingTypesByName("All")[0].attributes);var t;var n;var r=properties;if(applicationState.currentSubregion)r=new Properties(r.propertiesBySubregion(applicationState.currentSubregion.SubRegion));else if(applicationState.currentRegion)r=new Properties(r.propertiesByRegion(applicationState.currentRegion.Region));var i=r.length;for(var s=0;s<i;s++){var o=false;if(applicationState.currentArea&&applicationState.currentArea.AreaName!="All"){n=r.models[s].attributes.PropertyRange.split("|");for(var u=0;u<n.length;u++){if(applicationState.currentArea.AreaName==n[u]){o=true;break}}}else{o=true}if(o){t=r.models[s].attributes.PropertyType.split(",");for(var u=0;u<t.length;u++){var a=$.trim(t[u]);if(e.buildingTypesByName(a).length==0&&a!="Developments"){e.add(buildingtypes.buildingTypesByName(a)[0].attributes)}}}}return e}function initScreen(){logCallee("initScreen");initMedia();for(var e=0;e<regionPins.length;e++){regionPins[e].remove();regionPins[e]=null}regionPins=[];if(!isTouch&&!is_safari){for(var e=0;e<propertyPins.length;e++){propertyPins[e].remove();propertyPins[e]=null}}else{for(var e=0;e<propertyPins.length;e++){propertyPins[e].setMap(null);propertyPins[e]=null}}propertyPins=[];initPlacesVars();removeSearchPanel();removePanels();if(boundsChangedHandle)google.maps.event.removeListener(boundsChangedHandle)}function initMedia(){logCallee("initMedia");$("#iframe").attr("src","http://www.youtube.com/embed/EpPMXg8uwl0")}function removeSearchPanel(){logCallee("removeSearchPanel");$("#search-container").hide();$("#city-dropdown-menu li").unbind();$("#region-dropdown-menu li").unbind();$("#subregion-dropdown-menu li").unbind();$("#area-dropdown-menu li").unbind();$("#buildingtype-dropdown-menu li").unbind();$("#footer li#contact-menu").unbind();$("#footer li#about-menu").unbind();$("#search-container ul#menu li#testimonial-item").unbind();$("#gmLogo").unbind();$("#home-menu").unbind();$("#city-dropdown-menu-m li").unbind();$("#region-dropdown-menu-m li").unbind();$("#subregion-dropdown-menu-m li").unbind();$("#area-dropdown-menu-m li").unbind();$("#buildingtype-dropdown-menu-m li").unbind();$("#aboutIphone").unbind();$("#contact").unbind()}function removePanels(){logCallee("removePanels");$("#place-controls-container").hide();$("#place-controls-container .controller").unbind();$("#property-list-container").hide();$("#property-list li a").unbind();$("#featured-list li a").unbind();$("#testimonial-list-container").hide();$("#testimonial-list li a").unbind();$("#property-info-container").hide();$("#property-info").hide();$("#property-info-route").unbind();$("#property-info a#comparison-add").unbind();$("#property-info a#close").unbind();$("#gallery-trigger").unbind();$("#email-property-trigger").unbind();$(".brochureWhiteIcon").unbind();$(".floorplanWhiteIcon").unbind();$("#searchTextField").unbind();$("#downloadList a").unbind();$(".propertySidebarGallery a").unbind();$("#gallery").hide();$("#gallery a#close").unbind();$("#email-property").hide();$("#email-property a#close").unbind();$("#email-comparison").hide();$("#email-comparison a#close").unbind();$("#google-place-info-container").hide();$("#google-place-info a#close").unbind();$("#goodman-place-info-container").hide();$("#goodman-place-info a#close").unbind();$("#rtacam-place-info-container").hide();$("#rtacam-place-info #refresh").unbind();$("#rtacam-place-info a#close").unbind();$("#route-info-container").hide();$("#route-info-exit").unbind();hideCitySelectPanel();$("#mycomparison-list-container").hide();$("#mycomparison-list").hide();$("#mycomparison-list-container a#close").unbind();$("#email-comparison-trigger").unbind();$("#mycomparison-list-container a#clearall").unbind();$("#comparison-list-container").hide();$("#contact-us-container").hide();$("#contact-us a#close").unbind();$("#about-container").hide();$("#about a#close").unbind();$("#about-container").hide();$("#about a#close").unbind();$("#testimonialItem-container").hide();$("#testimonialItem a#close").unbind();$(".dropdown").hide();$("#navTooltip").hide();$("#placesTooltip").hide();$("#compareTooltipPanel").hide();$(".brochureWhiteIcon").unbind();$(".floorplanWhiteIcon").unbind();$("#downloadList a").unbind();$(".pac-container").remove()}function initRouter(){logCallee("initRouter");navigationRouter=new NavigationRouter;Backbone.history.start()}function buildRegions(e){logCallee("buildRegions");var t=new Array;var n=new Array;var r=e.models.length;var i=0;for(var s=0;s<r;s++){if($.inArray(e.models[s].attributes.Region,t)==-1){i++;t.push(e.models[s].attributes.Region);n.push({id:i,City:e.models[s].attributes.City,Region:e.models[s].attributes.Region,icon:"img/goodman_pointer.png",Geo:""})}}r=n.length;for(var s=0;s<r;s++){n[s].Geo=getBoundsCenter(e,"region",n[s].Region)}return n}function buildSubRegions(e){logCallee("buildSubRegions");var t=new Array;var n=new Array;var r=e.models.length;var i=0;for(var s=0;s<r;s++){if($.inArray(e.models[s].attributes.SubRegion,t)==-1){i++;t.push(e.models[s].attributes.SubRegion);n.push({id:i,City:e.models[s].attributes.City,SubRegion:e.models[s].attributes.SubRegion,Region:e.models[s].attributes.Region,icon:"img/goodman_pointer.png",Geo:""})}}r=n.length;for(var s=0;s<r;s++){n[s].Geo=getBoundsCenter(e,"subregion",n[s].SubRegion)}return n}function getBoundsCenter(e,t,n){var r;var i=Number.POSITIVE_INFINITY;var s=Number.NEGATIVE_INFINITY;var o=Number.POSITIVE_INFINITY;var u=Number.NEGATIVE_INFINITY;var a;var f;var l;var c="null";var h=e.models.length;if(t=="region"){for(var p=0;p<h;p++){if(e.models[p].attributes.Region==n){r=e.models[p].attributes.Geo;try{if(r.lat<i){i=r.lat}if(r.lng<o){o=r.lng}if(r.lat>s){s=r.lat}if(r.lng>u){u=r.lng}}catch(d){logCallee("getBoundsCenter - 1 - Bad Geo data in property="+e.models[p].attributes.DisplayName)}}}a=new google.maps.LatLng(i,o);f=new google.maps.LatLng(s,u);l=new google.maps.LatLngBounds(a,f)}if(t=="subregion"){for(var p=0;p<h;p++){if(e.models[p].attributes.SubRegion==n){r=e.models[p].attributes.Geo;try{if(r.lat<i){i=r.lat}if(r.lng<o){o=r.lng}if(r.lat>s){s=r.lat}if(r.lng>u){u=r.lng}}catch(d){logCallee("getBoundsCenter - 2 - Bad Geo data in property="+e.models[p].attributes.DisplayName)}}}a=new google.maps.LatLng(i,o);f=new google.maps.LatLng(s,u);l=new google.maps.LatLngBounds(a,f)}if(l)c={lat:l.getCenter().lat(),lng:l.getCenter().lng()};return c}function loadRTAPlaces(){logCallee("loadRTAPlaces");rtaPlaces=new RtaPlaces;var e="traffic-cam.json";var t;$.getJSON(e,function(e){$.each(e.features,function(e,t){try{var n=new google.maps.LatLng(t.geometry.coordinates[1],t.geometry.coordinates[0]);var r=e+1;rtaPlaces.add({id:r,rtaid:t.id,type:"rtacam",title:t.properties.title,view:t.properties.view,direction:t.properties.direction,href:t.properties.href,location:n})}catch(i){logCallee("!!! ERROR - loadRTAPlaces "+i)}})})}function getActiveProperties(e){logCallee("################################# IE callback for getActiveProperties ");var t=jQuery.parseJSON(e.text);buildProperties(t);retrievedURLs++;if(retrievedURLs==retrieveURLs.length){initRouter()}}function getBBXtras(e){logCallee("################################# IE callback for getBBXtras");var t=jQuery.parseJSON(e.text);buildBBExtras(t);retrievedURLs++;if(retrievedURLs==retrieveURLs.length){initRouter()}}function loadProperties(){logCallee("loadProperties "+applicationState.currentBaseURL);retrievedURLs=0;var e="text";if($.browser.msie){if(window.location.hostname.indexOf("au.goodman.com")!=-1||window.location.hostname.indexOf("www.goodman.com")!=-1){retrieveURLs=["http://"+window.location.hostname+"/services/integrationservices.asmx/GetActiveProperties?countrycode=au","http://"+window.location.hostname+"/services/integrationservices.asmx/GetBBXtras?countrycode=au"]}else{retrieveURLs=[applicationState.currentBaseURL+"ws/ie7handler.asmx/GetActiveProperties",applicationState.currentBaseURL+"ws/ie7handler.asmx/GetBBXtras"]}}else{retrieveURLs=["http://www.goodman.com/services/integrationservices.asmx/GetActiveProperties?countrycode=au","http://www.goodman.com/services/integrationservices.asmx/GetBBXtras?countrycode=au"]}for(var t=0;t<retrieveURLs.length;t++){$.ajax({url:retrieveURLs[t],dataType:e,data:{},async:true,success:function(e){return function(t){logCallee("loadProperties callback "+e);var n=$.trim($(t).text());var r=jQuery.parseJSON(n);if(e.indexOf("GetActiveProperties")!=-1){buildProperties(r);retrievedURLs++}if(e.indexOf("GetBBXtras")!=-1){buildBBExtras(r);retrievedURLs++}if(retrievedURLs==retrieveURLs.length){initRouter()}}}(retrieveURLs[t]),error:function(e){return function(t){logCallee("!!!ERROR - loadProperties callback $.ajax error: "+t.statusText+" for URL="+e)}}(retrieveURLs[t])})}}function localJSONEnabled(){if(!_localPropertyJSON||!_localBBXtrasJSON)return false;try{eval(_localPropertyJSON)}catch(e){return false}try{eval(_localBBXtrasJSON)}catch(e){return false}return true}function loadPropertiesLocally(){logCallee("loadPropertiesLocally");var activeProperties=eval(_localPropertyJSON);logCallee("activeProperties.length = "+activeProperties.length);buildProperties(activeProperties);var BBXtras=eval(_localBBXtrasJSON);logCallee("BBXtras.length = "+BBXtras.length);buildBBExtras(BBXtras);initRouter()}function buildBBExtras(e){logCallee("buildBBExtras");bbxtras=new BBXtras(e);var t=bbxtras.bbxtrasByTypePrimary("testimonial");var n,r,i,s;customerPodTestimonials=new Testimonials;testimonialPodTestimonials=new Testimonials;staffPodTestimonials=new Testimonials;for(var o=0;o<t.length;o++){n=t[o].attributes;i=document.createElement("DIV");i.innerHTML=n.Content;s=i.textContent||i.innerText;i=document.createElement("DIV");i.innerHTML=s;s=i.textContent||i.innerText;r={id:n.TypeTertiary,url:s.split("|")[0],blurb:s.split("|")[1]};if(n.TypeSecondary==="customerpod"){customerPodTestimonials.add(r)}else if(n.TypeSecondary==="testimonialpod"){testimonialPodTestimonials.add(r)}else if(n.TypeSecondary==="staffpod"){staffPodTestimonials.add(r)}}allPodTestimonials=[];for(var o=0;o<staffPodTestimonials.models.length;o++){allPodTestimonials.push(staffPodTestimonials.models[o].attributes)}for(var o=0;o<testimonialPodTestimonials.models.length;o++){allPodTestimonials.push(testimonialPodTestimonials.models[o].attributes)}}function buildProperties(e){logCallee("buildProperties");properties=new Properties(e);var t;var n;var r;for(var i=0;i<properties.models.length;i++){t="-25.50818448289275,133.95463650512693";if(properties.models[i].attributes.Geo){t=properties.models[i].attributes.Geo}else{logCallee("buildProperties - 1 - Bad Geo data in property="+properties.models[i].attributes.DisplayName);continue}n=t.split(",");r={lat:$.trim(n[0]),lng:$.trim(n[1])};properties.models[i].attributes.Geo=r;if(properties.models[i].attributes.Region.indexOf("Sydney")!=-1){properties.models[i].attributes.City="Sydney"}if(properties.models[i].attributes.Region.indexOf("Melbourne")!=-1){properties.models[i].attributes.City="Melbourne"}if(properties.models[i].attributes.Region.indexOf("Brisbane")!=-1){properties.models[i].attributes.City="Brisbane"}if(properties.models[i].attributes.Region.indexOf("Perth")!=-1){properties.models[i].attributes.City="Perth"}if(properties.models[i].attributes.Region.indexOf("Adelaide")!=-1){properties.models[i].attributes.City="Adelaide"}if(properties.models[i].attributes.Region.indexOf("Canberra")!=-1){properties.models[i].attributes.City="Canberra"}if(properties.models[i].attributes.PropertyRange){var s=properties.models[i].attributes.PropertyRange.split("|");var o="";var u=false;for(var a=0;a<s.length;a++){if(s[a]=="2,501 to 5,000 sqm"||s[a]=="5,001 to 10,000 sqm"||s[a]=="10,000+ sqm"){if(!u)o+=(a>0?"|":"")+lastAreaName}else{o+=(a>0?"|":"")+s[a]}}properties.models[i].attributes.PropertyRange=o}}regions=new Regions(buildRegions(properties));subregions=new Subregions(buildSubRegions(properties));for(var i=0;i<regions.models.length;i++){try{if(regions.models[i].attributes.Region.indexOf("Sydney")!=-1){regions.models[i].attributes.City="Sydney"}if(regions.models[i].attributes.Region.indexOf("Melbourne")!=-1){regions.models[i].attributes.City="Melbourne"}if(regions.models[i].attributes.Region.indexOf("Brisbane")!=-1){regions.models[i].attributes.City="Brisbane"}if(regions.models[i].attributes.Region.indexOf("Perth")!=-1){regions.models[i].attributes.City="Perth"}if(regions.models[i].attributes.Region.indexOf("Adelaide")!=-1){regions.models[i].attributes.City="Adelaide"}if(regions.models[i].attributes.Region.indexOf("Canberra")!=-1){regions.models[i].attributes.City="Canberra"}}catch(f){logCallee("buildProperties - 2 - Bad region")}}for(var i=0;i<subregions.models.length;i++){try{if(subregions.models[i].attributes.Region.indexOf("Sydney")!=-1){subregions.models[i].attributes.City="Sydney"}if(subregions.models[i].attributes.Region.indexOf("Melbourne")!=-1){subregions.models[i].attributes.City="Melbourne"}if(subregions.models[i].attributes.Region.indexOf("Brisbane")!=-1){subregions.models[i].attributes.City="Brisbane"}if(subregions.models[i].attributes.Region.indexOf("Perth")!=-1){subregions.models[i].attributes.City="Perth"}if(subregions.models[i].attributes.Region.indexOf("Adelaide")!=-1){subregions.models[i].attributes.City="Adelaide"}if(subregions.models[i].attributes.Region.indexOf("Canberra")!=-1){subregions.models[i].attributes.City="Canberra"}}catch(f){logCallee("buildProperties - 3 - Bad subregion")}}}function loadGoodmanPlaces(){goodmanPlaces=new GoodmanPlaces;var e="SELECT name,category,location,description FROM 3631271";e=encodeURIComponent(e);var t=new google.visualization.Query("http://www.google.com/fusiontables/gvizdata?tq="+e);t.send(function(e){logCallee("loadGoodmanPlaces "+e);var t=e.getDataTable().getNumberOfRows();for(var n=0;n<t;n++){var r=e.getDataTable().getValue(n,0);var i=e.getDataTable().getValue(n,1);var s=e.getDataTable().getValue(n,2);var o=s.split(" ");var u=o[0];var a=o[1];var f=new google.maps.LatLng(u,a);var l=e.getDataTable().getValue(n,3);var c=n+1;goodmanPlaces.add({id:c,name:r,type:i,description:l,location:f})}})}function createCollections(){logCallee("createCollections");if(!localJSONEnabled())loadProperties();loadRTAPlaces();cities=new Cities([{id:1,City:"Sydney",Geo:{lat:-33.86623,lng:151.2073}},{id:2,City:"Melbourne",Geo:{lat:-37.813866522309176,lng:144.9630231170654}},{id:3,City:"Brisbane",Geo:{lat:-27.470904852093124,lng:153.02355741548536}},{id:4,City:"Adelaide",Geo:{lat:-34.92884252760139,lng:138.60007767963407}},{id:5,City:"Perth",Geo:{lat:-31.95294655204655,lng:115.8574826030731}},{id:6,City:"Canberra",Geo:{lat:-35.18823918841276,lng:149.07354061889646}}]);areas=new AreaDDItems([{id:1,AreaName:"All"},{id:2,AreaName:"Less than 500 sqm"},{id:3,AreaName:"501 to 1,000 sqm"},{id:4,AreaName:"1,001 to 2,500 sqm"},{id:5,AreaName:lastAreaName}]);buildingtypes=new BuildingTypeDDItems([{id:1,BuildingTypeName:"All"},{id:2,BuildingTypeName:"Industrial"},{id:3,BuildingTypeName:"Commercial"}])}function placesRequestFunction(){logCallee("placesRequestFunction");googlePlacesRequestFunction();rtaPlacesRequestFunction()}function rtaPlacesRequestFunction(){logCallee("rtaPlacesRequestFunction");var e;for(var t=0;t<rtaPlaces.length;t++){e=rtaPlaces.models[t].attributes.location;if(Math.abs(currentWeightedCentre.lat()-e.lat())<.012&&Math.abs(currentWeightedCentre.lng()-e.lng())<.012){createRtaPlacePin(rtaPlaces.models[t].attributes)}}}function goodmanPlacesRequestFunction(){logCallee("goodmanPlacesRequestFunction");var e;for(var t=0;t<goodmanPlaces.length;t++){e=goodmanPlaces.models[t].attributes.location;if(Math.abs(currentWeightedCentre.lat()-e.lat())<.012&&Math.abs(currentWeightedCentre.lng()-e.lng())<.012){createGoodmanPlacePin(goodmanPlaces.models[t].attributes)}}}function createRtaPlacePin(e){rtaPlaceMarker=new google.maps.Marker({map:map,position:e.location,icon:"img/"+placeTypesObject[e.type].icon,type_:e.type,grouping_:placeTypesObject[e.type].grouping});google.maps.event.addListener(rtaPlaceMarker,"click",function(){logCallee("RTA place pin clicked - "+e.title+" id="+e.id);removePanels();createRtaPlaceInfoPanel(e);applicationState.currentProperty=null;navigationRouter.navigate(applicationState.getRouteForThisState(),{trigger:false});createPlaceControlsPanel();createPropertyListPanel();createTestimonialListPanel()});placePins.push(rtaPlaceMarker)}function createGoodmanPlacePin(e){goodmanPlaceMarker=new google.maps.Marker({map:map,position:e.location,icon:"img/"+placeTypesObject[e.type].icon,type_:e.type,grouping_:placeTypesObject[e.type].grouping});google.maps.event.addListener(goodmanPlaceMarker,"click",function(){logCallee("Goodman place pin clicked - "+e.name+" id="+e.id);removePanels();createGoodmanPlaceInfoPanel(e);applicationState.currentProperty=null;navigationRouter.navigate(applicationState.getRouteForThisState(),{trigger:false});createPlaceControlsPanel();createPropertyListPanel();createTestimonialListPanel()});placePins.push(goodmanPlaceMarker)}function googlePlacesRequestFunction(){logCallee("googlePlacesRequestFunction");if(boundsChangedHandle)google.maps.event.removeListener(boundsChangedHandle);var e;for(var t=0;t<placesRequestCountMax;t++){e=[];if(t==0){e.push("restaurant");e.push("bar");e.push("cafe")}else if(t==1){e.push("atm");e.push("parking")}else if(t==2){e.push("university");e.push("gas_station");e.push("hospital");e.push("post_office");e.push("train_station");e.push("airport");e.push("gym");e.push("bus_station");e.push("movie_theater")}else if(t==3){e.push("shopping_mall");e.push("store")}logCallee("placesRequestFunction "+currentWeightedCentre+" "+e.join());placesRequest={location:currentWeightedCentre,radius:1e3,types:e};placesService.search(placesRequest,googlePlacesRequestCallback)}}function googlePlacesRequestCallback(e,t){var n;if(t==google.maps.places.PlacesServiceStatus.OK){for(var r=0;r<e.length;r++){var i=e[r].geometry.location;createGooglePlacePin(e[r])}}placesRequestCount++;if(placesRequestCount==placesRequestCountMax){boundsChangedHandle=google.maps.event.addListener(map,"bounds_changed",boundsChangedFunction)}}function createGooglePlacePin(e){var t=placeTypesArray.length;var n=e.types.length;var r="";e:for(var i=0;i<t;i++){for(var s=0;s<n;s++){if(placeTypesArray[i]==e.types[s]){r=placeTypesArray[i];break e}}}googlePlaceMarker=new google.maps.Marker({map:map,position:e.geometry.location,icon:"img/"+placeTypesObject[r].icon,type_:r,grouping_:placeTypesObject[r].grouping});google.maps.event.addListener(googlePlaceMarker,"click",function(){logCallee("Google place pin clicked - "+e.name+" id="+e.reference);_gaq.push(["_trackEvent","Places Pins",e.name]);_gaq.push(["_trackPageview","vp/Places Pins: "+e.name]);var t={reference:e.reference};var n=new google.maps.places.PlacesService(map);n.getDetails(t,function(e,t){if(t==google.maps.places.PlacesServiceStatus.OK){removePanels();createPlaceControlsPanel();createPropertyListPanel();createTestimonialListPanel();var n=e;e.type=r;createGooglePlaceInfoPanel(n)}});applicationState.currentProperty=null;navigationRouter.navigate(applicationState.getRouteForThisState(),{trigger:false})});placePins.push(googlePlaceMarker)}function handleDirectionRequest(e,t){logCallee("handleDirectionRequest "+arguments);calcRoute(e,t);$("#property-info-container").hide();$("#property-info").hide()}function calcRoute(e,t){logCallee("calcRoute "+arguments);if(e!=t){var n={origin:e,destination:t,travelMode:google.maps.DirectionsTravelMode.DRIVING,unitSystem:google.maps.DirectionsUnitSystem.METRIC,provideRouteAlternatives:false};directionsDisplay.setMap(map);directionsService.route(n,function(e,t){if(t==google.maps.DirectionsStatus.OK){directionsDisplay.setDirections(e)}})}}function calculateDistances(e,t){for(var n=0;n<routeArray.length;n++){routeArray[n]=null;routeNameArray[n]=null}routeArray=[];routeNameArray=[];if(applicationState.currentScreen=="route"){routeArray.push(t.address)}else{routeObject={pointA:locations["airport"+t],pointB:locations["city"+t],pointC:locations["seaport"+t]};for(var r in routeObject){routeArray.push(routeObject[r].address);routeNameArray.push(routeObject[r].title)}logCallee("calculateDistances "+routeArray.join());distanceBlurb=""}distanceService.getDistanceMatrix({origins:[e],destinations:routeArray,travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.METRIC,avoidHighways:false,avoidTolls:false},calculateDistancesCallback)}function calculateDistancesCallback(e,t){logCallee("calculateDistancesCallback "+arguments);if(t!=google.maps.DistanceMatrixStatus.OK){logCallee("Error was: "+t)}else{var n=e.originAddresses;var r=e.destinationAddresses;if(applicationState.currentScreen=="route"){var i=e.rows[0].elements;if(i[0].status==="OK")$("#distance-blurb-custom").html(i[0].distance.text)}else{var s=$("#property-info .propertyContent ul.propertyDistances").width();var o=$("#property-info .propertyContent ul.propertyDistances li.propertyDistanceItem").width()+2;var u=$("#property-info .propertyContent ul.propertyDistances li#custom-route-input input").width();logCallee("ulWidth = "+s+", liWidth = "+o);var a=0;for(var f=0;f<n.length;f++){var i=e.rows[f].elements;for(var l=0;l<i.length;l++){if(i[l].status==="OK"){if(i[l].distance.value<_maxRouteDistance*1e3){$("#distance-blurb-"+l).html(i[l].distance.text);$("#distance-blurb-"+l).parent().parent("li").show();a++}}}}var c=s+o*a;$("#property-info .propertyContent ul.propertyDistances").width(c);if(a!=3)$("#property-info .propertyContent ul.propertyDistances li#custom-route-input input").width(c-23);if(a==0)$("#property-info .propertyContent ul.propertyDistances").attr("class","propertyDistances propertyDistancesNoRoute")}}}function initializeMap(){logCallee("initializeMap "+arguments);locations={newtown:{title:"Newtown",Geo:{lat:-33.89737,lng:151.17894},address:"327 King Street, Newtown, NSW"},walshbay:{title:"Walsh Bay",Geo:{lat:-33.855,lng:151.203},address:"24 Hickson Road, Sydney, NSW, Australia"},central:{title:"central",Geo:{lat:-33.88303,lng:151.20624},address:"Central Station, Sydney, NSW, Australia"},airportSydney:{title:"airport",Geo:{lat:-33.93636,lng:151.16656},address:"Mascot Airport, Sydney, NSW, Australia"},citySydney:{title:"city",Geo:{lat:-33.86623,lng:151.2073},address:"1 Martin Place, Sydney, NSW, Australia"},seaportSydney:{title:"seaport",Geo:{lat:-33.96245530190917,lng:151.2142974643707},address:"Foreshore Road, Sydney, NSW, Australia"},airportMelbourne:{title:"airport",Geo:{lat:-37.67164066783794,lng:144.8513573913574},address:"Melbourne Airport, Tullamarine, Victoria, Australia"},cityMelbourne:{title:"city",Geo:{lat:-37.813866522309176,lng:144.9630231170654},address:"1 Bourke Street, Melbourne, Victoria, Australia"},seaportMelbourne:{title:"seaport",Geo:{lat:-37.84528829101906,lng:144.9147004394531},address:"Williamstown Road, Melbourne, Victoria, Australia"},airportBrisbane:{title:"airport",Geo:{lat:-27.3847732878235,lng:153.11739449787137},address:"Brisbane Airport, Brisbane, Queensland, Australia"},cityBrisbane:{title:"city",Geo:{lat:-27.470904852093124,lng:153.02355741548536},address:"George Street, Brisbane, Queensland, Australia"},seaportBrisbane:{title:"seaport",Geo:{lat:-27.39377073650812,lng:153.16407029914853},address:"Port Drive, Brisbane, Queensland, Australia"},airportAdelaide:{title:"airport",Geo:{lat:-34.93437514066293,lng:138.54083304691312},address:"Adelaide Airport, Adelaide, South Australia, Australia"},cityAdelaide:{title:"city",Geo:{lat:-34.92884252760139,lng:138.60007767963407},address:"Grote Street, Adelaide, South Australia, Australia"},seaportAdelaide:{title:"seaport",Geo:{lat:-34.83812578421272,lng:138.50272958564756},address:"Port River Expressway, Port Adelaide, South Australia, Australia"},airportCanberra:{title:"airport",Geo:{lat:-35.30726896048644,lng:149.19020598220823},address:"Canberra Airport, Canberra, Australia Capital Territory, Australia"},cityCanberra:{title:"city",Geo:{lat:-35.27885701418874,lng:149.13084735560415},address:"34 East Row, Canberra, Australian Capital Territory, Australia"},seaportCanberra:{title:"seaport",Geo:{lat:-33.96245530190917,lng:151.2142974643707},address:"Foreshore Road, Sydney, NSW, Australia"},airportPerth:{title:"airport",Geo:{lat:-31.9416583,lng:115.9734909},address:"Perth International Airport, Perth, Western Australia, Australia"},cityPerth:{title:"city",Geo:{lat:-31.95294655204655,lng:115.8574826030731},address:"96 William Street, Perth, Western Australia, Australia"},seaportPerth:{title:"seaport",Geo:{lat:-32.04766686851078,lng:115.73522751617429},address:"1 Cliff Street, Fremantle, Western Australia, Australia"}};distanceServiceInit();directionsServiceInit()}function setMap(e,t,n,r,i){logCallee("setMap "+arguments);pinkParkStyleMapType=new google.maps.StyledMapType(pinkParkStyle,{name:"Pink Parks"});blueRoadStyleMapType=new google.maps.StyledMapType(blueRoadStyle,{name:"Blue Roads"});desaturatedStyleMapType=new google.maps.StyledMapType(desaturatedStyle,{name:"Desaturated"});unclutteredStyleMapType=new google.maps.StyledMapType(unclutteredStyle,{name:"Uncluttered"});unclutteredStyleMapType2=new google.maps.StyledMapType(unclutteredStyle2,{name:"Uncluttered2"});unclutteredStyleMapType3=new google.maps.StyledMapType(unclutteredStyle3,{name:"Uncluttered3"});mapOptions={zoom:t,center:e,mapTypeId:"uncluttered3",zoomControl:false,streetViewControl:false,mapTypeControl:false,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER},panControl:false,panControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER},disableDoubleClickZoom:true};map=new google.maps.Map(document.getElementById("map-canvas"),mapOptions);map.mapTypes.set("pink_parks",pinkParkStyleMapType);map.mapTypes.set("blue_roads",blueRoadStyleMapType);map.mapTypes.set("desaturated",desaturatedStyleMapType);map.mapTypes.set("uncluttered",unclutteredStyleMapType);map.mapTypes.set("uncluttered2",unclutteredStyleMapType2);map.mapTypes.set("uncluttered3",unclutteredStyleMapType3);if(n){zoomHandle=google.maps.event.addListener(map,"zoom_changed",function(){if(map.getZoom()<r)map.setZoom(r);if(map.getZoom()>i)map.setZoom(i)})}else{zoomHandle=google.maps.event.addListener(map,"zoom_changed",function(){if(map.getZoom()<5)map.setZoom(5)})}clickHandle=google.maps.event.addListener(map,"click",function(e){logCallee("map clickHandler");$(".dropdown").hide();$("#navTooltip").hide();$("#placesTooltip").hide();$("#compareTooltipPanel").hide()});boundsHandle=google.maps.event.addListener(map,"center_changed",function(){checkBounds()});placesService=new google.maps.places.PlacesService(map)}function checkBounds(){if(!allowedBounds.contains(map.getCenter())){var e=map.getCenter();var t=e.lng();var n=e.lat();var r=allowedBounds.getNorthEast().lng();var i=allowedBounds.getNorthEast().lat();var s=allowedBounds.getSouthWest().lng();var o=allowedBounds.getSouthWest().lat();if(t<s){t=s}if(t>r){t=r}if(n<o){n=o}if(n>i){n=i}map.setCenter(new google.maps.LatLng(n,t))}}function distanceServiceInit(){logCallee("distanceServiceInit "+arguments);distanceService=new google.maps.DistanceMatrixService}function trafficLayerInit(){logCallee("trafficLayerInit "+arguments);trafficLayer=new google.maps.TrafficLayer}function directionsServiceInit(){logCallee("directionsServiceInit "+arguments);directionsService=new google.maps.DirectionsService;var e=new google.maps.Polyline({strokeColor:"#77ac1c",strokeOpacity:.5,strokeWeight:10});var t={suppressMarkers:true,polylineOptions:e};directionsDisplay=new google.maps.DirectionsRenderer(t)}function initPlacesVars(){logCallee("initPlacesVars "+placePins.length);placesRequestCount=0;for(var e=0;e<placePins.length;e++){placePins[e].setMap(null);placePins[e]=null}placePins=[];$("#place-controls-container .controller").removeClass("off")}function initWidgits(){$("a.dropdown-toggle").bind("click",function(e){e.preventDefault();$("#menu .dropdown").fadeOut(100);var t=$(this).parent().find(".dropdown");$(t).fadeIn(50);$("#menu .dropdown .dropdown-menu li").bind("click",function(){$("#menu .dropdown").fadeOut(100)})});$("a#mobileMenuToggle").click(function(){$("#iphoneMenu").toggle()});$("a#mobilePropertyDetails").click(function(){$("#property-info-container").removeClass("hidden");$("#property-list-container").removeClass("hidden");$(this).hide();$("#mobileMenuToggle").show()});$("a#getStartedButton").click(function(){hideCitySelectPanel();$("#headerMenu #navTooltip").show();$("#placesTooltip").show();$("#compareTooltipPanel").show();$("#iphoneMenu").show()});$("#navTooltipContent #close").click(function(){$("#navTooltip").hide();$("#placesTooltip").hide();$("#compareTooltipPanel").hide()});$("#property-info-container a#viewOneMapLink").live("click",function(){$("#property-info-container").addClass("hidden");$("#property-list-container").addClass("hidden");$("#mobilePropertyDetails").show();$("#mobileMenuToggle").hide()});$("#iphoneMenu #filter").click(function(){$("#iphoneMenu #menu-1-m").hide();$("#iphoneMenu #menu-2-m").show()});$("#iphoneMenu #location").click(function(){$("#iphoneMenu #menu-1-m").show();$("#iphoneMenu #menu-2-m").hide()});$("#termsConditionsHeader").live("click",function(){$("#about .aboutMainBlurb").toggle();$("#termsConditionsContent").toggle();$("#termsConditionsHeader #statusHandle .arrowUp").toggle();$("#termsConditionsHeader #statusHandle .arrowDown").toggle()})}function getDateAvailableSnippet(e){var t="";if(e.PropertyType.indexOf("Industrial")!==-1){if(e.DateAvailableIndustrial&&e.DateAvailableIndustrial!=="")t=e.DateAvailableIndustrial}if(e.PropertyType.indexOf("Commercial")!==-1){if(e.DateAvailableCommercial&&e.DateAvailableCommercial!=="")t=e.DateAvailableCommercial}if(e.PropertyType.indexOf("Developments")!==-1){if(e.DateAvailableDevelopment&&e.DateAvailableDevelopment!=="")t=e.DateAvailableDevelopment}return t}function getOtherSnippet(e){var t="";if(e.PropertyType.indexOf("Industrial")!==-1){if(e.WarehouseClearanceHeight&&e.WarehouseClearanceHeight!=="")t+="<li>Warehouse Clearance Height: "+e.WarehouseClearanceHeight+"</li>";if(e.Docks&&e.Docks!=="")t+="<li>Docks: "+e.Docks+"</li>";if(e.HardstandArea&&e.HardstandArea!==""&&e.HardstandArea!=="False")t+="<li>Hardstand Area: Yes</li>"}if(e.PropertyType.indexOf("Commercial")!==-1){if(e.FitOut&&e.FitOut!==""&&e.FitOut!=="False")t+="<li>Fitout: Yes</li>";if(e.ParkingRatio&&e.ParkingRatio!=="")t+="<li>Parking Ratio: "+e.ParkingRatio+"</li>";if(e.SignageOpportunities&&e.SignageOpportunities!==""&&e.SignageOpportunities!=="False")t+="<li>Signage Opportunities: Yes</li>"}if(e.PropertyType.indexOf("Developments")!==-1){if(e.DAApproval&&e.DAApproval!==""&&e.DAApproval!=="False")t+="<li>DA Approval: Yes</li>";if(e.Type&&e.Type!=="")t+="<li>Type: "+e.Type+"</li>";if(e.Zoning&&e.Zoning!=="")t+="<li>Zoning: "+e.Zoning+"</li>";if(e.Activity&&e.Activity!=="")t+="<li>Activity: "+e.Activity+"</li>";if(e.Infrastructure&&e.Infrastructure!=="")t+="<li>Infrastructure: "+e.Infrastructure+"</li>"}return t}function displayAmenity(e,t){if(e){var n=["Childcare","Cafe","Gym","Parking"];var r=["Childcare","On-site Café","Gym","Parking"];var i=e.split(",");for(var s=0;s<i.length;s++){var o=$.trim(i[s]);for(var u=0;u<r.length;u++){if(r[u]==o){$('<span class="tooltipWrapper"><img src="img/iconAmenity'+n[u]+'.gif" class="amenity'+n[u]+'"/>'+'<div class="tooltip amenity'+n[u]+'">'+'<div class="tooltipText darkGrey boxShadow">'+o+"</div>"+'<div class="tooltipArrow"></div>'+"</div>"+"</span>").appendTo(t);$(t+" .amenity"+n[u]).on("mouseover",function(){$(this).siblings(".tooltip").toggle()}).on("mouseout",function(){$(this).siblings(".tooltip").toggle()})}}}$(t).show()}}function updateComparisonAmenity(e){e=e||"div#mycomparison-list-container";var t=e+" div.comparison-list > ul > li";var n=false;for(var r=1;r<=$(t).length;r++){var i=$(t+":nth-child("+r+") div.comparisonAmenity span.tooltipWrapper");if(i.length>0){n=true;break}}if(n){$(e+" .comparison-list-lhs div.amenities").show();$(e+" div.comparisonAmenity").show()}else{$(e+" .comparison-list-lhs div.amenities").hide();$(e+" div.comparisonAmenity").hide()}}function displayLeaseStatus(e,t,n){if(t&&t!==""&&t!=="False")$(e).html("Leased").show();else if(isNewListing(n))$(e).html("New listing").show();else $(e).hide()}function isNewListing(e){var t=false;var n=e;if(e){if(e.length==8){n=e*1}else if(e.length>5){var r=e.split("/");if(r.length==3){var i=r[0];var s=r[1];var o=r[2];i=i.length==1?"0"+i:i;s=s.length==1?"0"+s:s;o=o.length==2?"20"+o:o;n=(o.toString()+s.toString()+i.toString())*1}}if(parseInt(n)===n){var u=new Date;var a=u.getDate();var f=u.getMonth()+1;var l=u.getFullYear();a=a<10?"0"+a:a;f=f<10?"0"+f:f;u=(l.toString()+f.toString()+a.toString())*1;logCallee("asNewDate = "+n+", today = "+u);t=n>=u}}else logCallee("no ShowAsNewUntil");return t}function setEvenHeight(e){var t=4;var n;var r=Math.ceil(e.length/t);for(var i=0;i<r;i++){n=0;for(var s=i*t;s<e.length&&s<(i+1)*t;s++){var o=$(e[s]).height();if(!n||n<o)n=o}for(var s=i*t;s<e.length&&s<(i+1)*t;s++){e[s].style.height=n+"px"}}}var GBB=this,cities,regions,subregions,areas,buildingtypes,properties,regionPins=[],placePins=[],propertyPins=[],goodmanPlaces,rtaPlaces,bbxtras,customerPodTestimonials,testimonialPodTestimonials,staffPodTestimonials,allPodTestimonials,querystring=[],initialRoute="",fromClickEvent=false,firstRouteEvent=true,isTouch=false,firstSubregionRouteEvent=true,firstEventForSession=true,is_chrome,is_explorer,is_firefox,is_safari,is_Opera,lastAreaName="2,501+ sqm",AreaDDItem=Backbone.Model.extend({}),BuildingTypeDDItem=Backbone.Model.extend({}),AreaDDItems=Backbone.Collection.extend({model:AreaDDItem,comparator:function(e){return e.get("id")},initialize:function(){},areasByName:function(e){return this.filter(function(t){return t.get("AreaName")===e})}}),BuildingTypeDDItems=Backbone.Collection.extend({model:BuildingTypeDDItem,comparator:function(e){return e.get("id")},initialize:function(){},buildingTypesByName:function(e){return this.filter(function(t){return t.get("BuildingTypeName")===e})}}),CityDDListView=Backbone.View.extend({el:$("#city-dropdown-menu"),template:$("#city-dropdown-menu-item-tmpl").template(),render:function(){$("#city-dropdown-menu").empty();$.tmpl(this.template,this.model.toArray()).appendTo(this.el);return this}}),RegionDDListView=Backbone.View.extend({el:$("#region-dropdown-menu"),template:$("#region-dropdown-menu-item-tmpl").template(),render:function(){$("#region-dropdown-menu").empty();$.tmpl(this.template,this.model.toArray()).appendTo(this.el);return this}}),SubregionDDListView=Backbone.View.extend({el:$("#subregion-dropdown-menu"),template:$("#subregion-dropdown-menu-item-tmpl").template(),render:function(){$("#subregion-dropdown-menu").empty();$.tmpl(this.template,this.model.toArray()).appendTo(this.el);return this}}),AreaDDListView=Backbone.View.extend({el:$("#area-dropdown-menu"),template:$("#area-dropdown-menu-item-tmpl").template(),render:function(){$("#area-dropdown-menu").empty();$.tmpl(this.template,this.model.toArray()).appendTo(this.el);return this}}),BuildingTypeDDListView=Backbone.View.extend({el:$("#buildingtype-dropdown-menu"),template:$("#buildingtype-dropdown-menu-item-tmpl").template(),render:function(){$("#buildingtype-dropdown-menu").empty();$.tmpl(this.template,this.model.toArray()).appendTo(this.el);return this}}),CityDDListViewM=Backbone.View.extend({el:$("#city-dropdown-menu-m"),template:$("#city-dropdown-menu-item-tmpl").template(),render:function(){$("#city-dropdown-menu-m").empty();$.tmpl(this.template,this.model.toArray()).appendTo(this.el);return this}}),RegionDDListViewM=Backbone.View.extend({el:$("#region-dropdown-menu-m"),template:$("#region-dropdown-menu-item-tmpl").template(),render:function(){$("#region-dropdown-menu-m").empty();$.tmpl(this.template,this.model.toArray()).appendTo(this.el);return this}}),SubregionDDListViewM=Backbone.View.extend({el:$("#subregion-dropdown-menu-m"),template:$("#subregion-dropdown-menu-item-tmpl").template(),render:function(){$("#subregion-dropdown-menu-m").empty();$.tmpl(this.template,this.model.toArray()).appendTo(this.el);return this}}),AreaDDListViewM=Backbone.View.extend({el:$("#area-dropdown-menu-m"),template:$("#area-dropdown-menu-item-tmpl").template(),render:function(){$("#area-dropdown-menu-m").empty();$.tmpl(this.template,this.model.toArray()).appendTo(this.el);return this}}),BuildingTypeDDListViewM=Backbone.View.extend({el:$("#buildingtype-dropdown-menu-m"),template:$("#buildingtype-dropdown-menu-item-tmpl").template(),render:function(){$("#buildingtype-dropdown-menu-m").empty();$.tmpl(this.template,this.model.toArray()).appendTo(this.el);return this}}),Testimonial=Backbone.Model.extend({}),Testimonials=Backbone.Collection.extend({model:Testimonial,comparator:function(e){return e.get("id")},initialize:function(){}}),GoodmanPlace=Backbone.Model.extend({}),GoodmanPlaces=Backbone.Collection.extend({model:GoodmanPlace,comparator:function(e){return e.get("id")},initialize:function(){},GoodmanPlacesByType:function(e){return this.filter(function(t){return t.get("type")===e})}}),RtaPlace=Backbone.Model.extend({}),RtaPlaces=Backbone.Collection.extend({model:RtaPlace,comparator:function(e){return e.get("id")},initialize:function(){},RtaPlacesByType:function(e){return this.filter(function(t){return t.get("type")===e})}}),Property=Backbone.Model.extend({defaults:{},url:function(){}}),BBXtra=Backbone.Model.extend({defaults:{},url:function(){}}),Region=Backbone.Model.extend({}),Subregion=Backbone.Model.extend({}),City=Backbone.Model.extend({}),Properties=Backbone.Collection.extend({model:Property,comparator:function(e){return e.get("id")},initialize:function(){},propertiesBySubregion:function(e){return this.filter(function(t){return t.get("SubRegion")===e})},propertiesByRegion:function(e){return this.filter(function(t){return t.get("Region")===e})},propertiesByCity:function(e){return this.filter(function(t){return t.get("City")===e})},propertiesById:function(e){return this.filter(function(t){return t.get("id")===e})},propertiesByPropertyName:function(e){return this.filter(function(t){return t.get("PropertyName")===e})},propertiesByDisplayName:function(e){return this.filter(function(t){return t.get("DisplayName")===e})},propertiesByArea:function(e){return this.filter(function(t){return t.get("Area")===e})},propertiesByBuildingType:function(e){return this.filter(function(t){return t.get("PropertyType")===e})}}),BBXtras=Backbone.Collection.extend({model:BBXtra,comparator:function(e){return e.get("id")},initialize:function(){},bbxtrasByTitle:function(e){return this.filter(function(t){return t.get("Title")===e})},bbxtrasByTypePrimary:function(e){return this.filter(function(t){return t.get("TypePrimary")===e})},bbxtrasByTypeSecondary:function(e){return this.filter(function(t){return t.get("TypeSecondary")===e})},bbxtrasByTypeTertiary:function(e){return this.filter(function(t){return t.get("TypeTertiary")===e})},bbxtrasByPrimarySecondary:function(e,t){return this.filter(function(n){return n.get("TypePrimary")===e&&n.get("TypeSecondary")===t})}}),Regions=Backbone.Collection.extend({model:Region,comparator:function(e){return e.get("Region")},initialize:function(){},regionsByCity:function(e){return this.filter(function(t){return t.get("City")===e})},regionsByName:function(e){return this.filter(function(t){return t.get("Region")===e})}}),Subregions=Backbone.Collection.extend({model:Subregion,comparator:function(e){return e.get("SubRegion")},initialize:function(){},subregionsByCity:function(e){return this.filter(function(t){return t.get("City")===e})},subregionsByRegion:function(e){return this.filter(function(t){return t.get("Region")===e})},subregionsByName:function(e){return this.filter(function(t){return t.get("SubRegion")===e})}}),Cities=Backbone.Collection.extend({model:City,comparator:function(e){return e.get("City")},initialize:function(){},citiesByName:function(e){return this.filter(function(t){return t.get("City")===e})}}),PropertyInfoView=Backbone.View.extend({el:$("#property-info"),template:$("#property-info-tmpl").template(),render:function(){$("#property-info").empty();$.tmpl(this.template,this.model).appendTo(this.el);var e=getDateAvailableSnippet(this.model);if(e){$(".propertyContent #propertyInfoDateAvailable span").html(e);$(".propertyContent #propertyInfoDateAvailable").show()}else{$(".propertyContent #propertyInfoDateAvailable").hide()}logCallee("???????????????????????? "+this.model.DetailedDescription);var t=document.createElement("DIV");t.innerHTML=this.model.DetailedDescription.replace("\r\n      ","");var n=t.textContent||t.innerText;var r="";var i=n.replace("\r","").replace("\n","").trim();var s=i.indexOf("<ul>");var o=i.indexOf("<table");var u=s<o?s<0?o:s:o<0?s:o;if(u>0){r=i.substr(0,u);i=i.substr(u,i.length-u)}else if(u<0){r=i;i=""}t=document.createElement("DIV");t.innerHTML=r&&r!="undefined"?r:this.model.BriefDescription;r=t.textContent||t.innerText;$("#DetailedDescriptionAdjusted").html('<p class="description-sub-heading print-only">Overview</p>'+r);if(i){$("#DetailedDescriptionFeatures").attr("class",$("#DetailedDescriptionFeatures").attr("class")+" features-included").html('<p class="description-sub-heading print-only">Features</p>'+i)}else{$(".propertyDescriptionContainer .description-tabs").hide();$("#property-info .propertyContent .propertyDescriptionContainer .propertyDescription").css("border-top","none")}var a=$("#DetailedDescriptionFeatures p");for(var f=0;f<a.length;f++){if(!$.trim(a[f].innerHTML.replace("\n","").replace("<br>","")))$("#DetailedDescriptionFeatures").html($("#DetailedDescriptionFeatures").html().replace(a[f].outerHTML,""))}$("#propertyDescriptionTabOverview").bind("click",function(){$("#propertyDescriptionTabOverview").attr("class","active-tab");$("#propertyDescriptionTabFeatures").attr("class","inactive-tab");$("#DetailedDescriptionAdjusted").show();$("#DetailedDescriptionFeatures").hide()});$("#propertyDescriptionTabFeatures").bind("click",function(){$("#propertyDescriptionTabOverview").attr("class","inactive-tab");$("#propertyDescriptionTabFeatures").attr("class","active-tab");$("#DetailedDescriptionAdjusted").hide();$("#DetailedDescriptionFeatures").show()});displayAmenity(this.model.Amenities,"#propertyAmentityContainer");var l=this.model.Contact1.split(",")[2];logCallee("isMobile = "+isMobile.any());logCallee("navigator.userAgent = "+navigator.userAgent);if(isMobile.any()){$("<a>").attr({href:"tel:"+l}).attr("class","phone-number").bind("click",function(){_gaq.push(["_trackEvent","call phone number click","clicked"])}).appendTo("span.propertyAgentContact").html(l)}else{$("span.propertyAgentContact").html(l)}$("#propertyInfoPrintDetailPanel p").filter(function(){return $.trim($(this).text())===""&&$(this).children().length==0}).remove();return this}}),GooglePlaceInfoView=Backbone.View.extend({el:$("#google-place-info"),template:$("#google-place-info-tmpl").template(),render:function(){$("#google-place-info").empty();$("#google-place-info").removeClass();$("#google-place-info").addClass("placePins");$("#google-place-info").addClass(this.model.type);$.tmpl(this.template,this.model).appendTo(this.el);return this}}),ContactUsView=Backbone.View.extend({el:$("#contact-us"),template:$("#contact-us-tmpl").template(),render:function(){$("#contact-us").empty();$.tmpl(this.template,this.model).appendTo(this.el);return this}}),TestimonialItemView=Backbone.View.extend({el:$("#testimonialItem"),template:$("#testimonialItem-tmpl").template(),render:function(){$("#testimonialItem").empty();$.tmpl(this.template,this.model).appendTo(this.el);var e="";for(var t=0;t<testimonialPodTestimonials.length;t++){e+="<li class='testimonialItem'>";e+="<a id='testimonial_"+testimonialPodTestimonials.models[t].attributes.id+"' href='http://www.youtube.com/embed/"+testimonialPodTestimonials.models[t].attributes.url+"?rel=0&wmode=transparent' rel='testimonialListVideo' class='testimonialListVideo'>";e+="<div style='background:url(http://i2.ytimg.com/vi/"+testimonialPodTestimonials.models[t].attributes.url+"/default.jpg) center center no-repeat;height: 76px;background-size: 100%;'></div>";e+="<p>"+testimonialPodTestimonials.models[t].attributes.blurb+"</p>";e+="</a>";e+="</li>"}$("#testimonialItemContentList2").html(e);var e="";for(var t=0;t<staffPodTestimonials.length;t++){e+="<li class='testimonialItem'>";e+="<a id='testimonial_"+staffPodTestimonials.models[t].attributes.id+"' href='http://www.youtube.com/embed/"+staffPodTestimonials.models[t].attributes.url+"?rel=0&wmode=transparent' rel='testimonialListVideo' class='testimonialListVideo'>";if(staffPodTestimonials.models[t].attributes.url==="ZkOy2ow4S5k"){e+="<div style='background:url(img/sydneyWest.jpg) center center no-repeat;height: 76px;background-size: 100%;'></div>"}else{e+="<div style='background:url(http://i2.ytimg.com/vi/"+staffPodTestimonials.models[t].attributes.url+"/default.jpg) center center no-repeat;height: 76px;background-size: 100%;'></div>"}e+="<p>"+staffPodTestimonials.models[t].attributes.blurb+"</p>";e+="</a>";e+="</li>"}$("#testimonialItemContentList").html(e);var n;n=function(e){logCallee("testimonialPodTestimonials video clicked "+this.href);e.preventDefault()};$("#testimonialItem li a").bind("click",n);setEvenHeight($("#testimonialItemContentList li"));setEvenHeight($("#testimonialItemContentList2 li"));return this}}),AboutView=Backbone.View.extend({el:$("#about"),template:$("#about-tmpl").template(),render:function(){$("#about").empty();$.tmpl(this.template,this.model).appendTo(this.el);var e,t;t=document.createElement("DIV");t.innerHTML=this.model.mainBlurb;e=t.textContent||t.innerText;$("#aboutBlurb").html(e);return this}}),GalleryView=Backbone.View.extend({el:$("#gallery"),template:$("#gallery-tmpl").template(),render:function(){$("#gallery").empty();$.tmpl(this.template,this.model).appendTo(this.el);return this}}),EmailPropertyView=Backbone.View.extend({el:$("#email-property"),template:$("#email-property-tmpl").template(),render:function(){$("#email-property").empty();$.tmpl(this.template,this.model).appendTo(this.el);return this}}),EmailComparisonView=Backbone.View.extend({el:$("#email-comparison"),template:$("#email-comparison-tmpl").template(),render:function(){$("#email-comparison").empty();$.tmpl(this.template,this.model).appendTo(this.el);return this}}),GoodmanPlaceInfoView=Backbone.View.extend({el:$("#goodman-place-info"),template:$("#goodman-place-info-tmpl").template(),render:function(){$("#goodman-place-info").empty();$.tmpl(this.template,this.model).appendTo(this.el);return this}}),RtacamPlaceInfoView=Backbone.View.extend({el:$("#rtacam-place-info"),template:$("#rtacam-place-info-tmpl").template(),render:function(){$("#rtacam-place-info").empty();$.tmpl(this.template,this.model).appendTo(this.el);return this}}),RouteInfoView=Backbone.View.extend({el:$("#route-info"),template:$("#route-info-tmpl").template(),render:function(){$("#route-info").empty();$.tmpl(this.template,this.model).appendTo(this.el);return this}}),PropertyListView=Backbone.View.extend({el:$("#property-list"),template:$("#property-list-item-tmpl").template(),render:function(){$("#property-list").empty();$.tmpl(this.template,this.model.toArray()).appendTo(this.el);return this}}),TestimonialListView=Backbone.View.extend({el:$("#testimonial-list"),template:$("#testimonial-list-item-tmpl").template(),render:function(){$("#testimonial-list").empty();$.tmpl(this.template,this.model.toArray()).appendTo(this.el);return this}}),FeaturedListView=Backbone.View.extend({el:$("#featured-list"),template:$("#featured-list-item-tmpl").template(),render:function(){$("#featured-list").empty();$.tmpl(this.template,this.model.toArray()).appendTo(this.el);return this}}),CitySelectView=Backbone.View.extend({el:$("#city-select-menu"),template:$("#city-select-item-tmpl").template(),render:function(){$("#city-select-menu").empty();$.tmpl(this.template,this.model.toArray()).appendTo(this.el);return this}}),myComparisonItems,myComparisonView,comparisonItems,comparisonView,MyComparisonItem=Backbone.Model.extend({defaults:function(){return{}},clear:function(){var e=myComparisonItems.models.length-1;$("#my-properties-count").html(e.toString());if(e===0){$("#my-properties-count").hide();$("#email-comparison-trigger").hide();$("#mycomparison-list-container a#close").click()}updateComparisonAmenity();this.destroy()}}),MyComparisonItemCollection=Backbone.Collection.extend({model:MyComparisonItem,localStorage:new Store("items-backbone"),nextId:function(){if(!this.length){return 1}return this.last().get("id")+1},comparator:function(e){return e.get("id")},itemsByDisplayName:function(e){return this.filter(function(t){return t.get("DisplayName")===e})}}),MyComparisonItemView=Backbone.View.extend({tagName:"li",template:$("#mycomparison-list-item-tmpl").template(),events:{"click a.destroy":"clear"},initialize:function(){this.model.bind("destroy",this.remove,this)},render:function(){var e,t;t=document.createElement("DIV");t.innerHTML=this.model.attributes.BriefDescription;e=t.textContent||t.innerText;t=document.createElement("DIV");t.innerHTML=e;this.model.attributes.BriefDescription=t.textContent||t.innerText;if($.browser.msie&&parseInt($.browser.version,10)===8){t=document.createElement("DIV");t.innerHTML=this.model.attributes.BriefDescription;this.model.attributes.BriefDescription=t.textContent||t.innerText}$.tmpl(this.template,this.model).appendTo(this.el);return this},clear:function(){this.model.clear();updateComparisonAmenity()}}),MyComparisonItemCollectionView=Backbone.View.extend({el:$("#mycomparison-list"),initialize:function(){myComparisonItems.bind("add",this.addOne,this);myComparisonItems.bind("reset",this.addAll,this);myComparisonItems.bind("all",this.render,this);myComparisonItems.fetch()},render:function(){},addOne:function(e){var t,n,r;t=new MyComparisonItemView({model:e});$("#myitems-list").append(t.render().el);n=getOtherSnippet(e.attributes);r=getDateAvailableSnippet(e.attributes);$("#comparisonOtherItems-"+e.attributes.DisplayName).html(n);$("#propertyDateAvailable-"+e.attributes.DisplayName).html(r);displayLeaseStatus("#myComparisonDescription #propertyStatus-"+e.attributes.DisplayName,e.attributes.IsLeased,e.attributes.ShowAsNewUntil);displayAmenity(e.attributes.Amenities,"#myComparisonAmentityContainer-"+e.attributes.DisplayName);updateComparisonAmenity()},addAll:function(){myComparisonItems.each(this.addOne)}}),ComparisonItem=Backbone.Model.extend({defaults:function(){return{}}}),ComparisonItemCollection=Backbone.Collection.extend({model:ComparisonItem,nextId:function(){if(!this.length){return 1}return this.last().get("id")+1},comparator:function(e){return e.get("id")},itemsByDisplayName:function(e){return this.filter(function(t){return t.get("DisplayName")===e})}}),ComparisonItemView=Backbone.View.extend({tagName:"li",template:$("#comparison-list-item-tmpl").template(),events:{},initialize:function(){},render:function(){var e,t;t=document.createElement("DIV");t.innerHTML=this.model.attributes.BriefDescription;e=t.textContent||t.innerText;t=document.createElement("DIV");t.innerHTML=e;this.model.attributes.BriefDescription=t.textContent||t.innerText;$.tmpl(this.template,this.model).appendTo(this.el);return this}}),ComparisonItemCollectionView=Backbone.View.extend({el:$("#comparison-list"),initialize:function(){comparisonItems.bind("add",this.addOne,this);comparisonItems.bind("reset",this.addAll,this);comparisonItems.bind("all",this.render,this);this.$("#items-list").empty()},render:function(){},addOne:function(e){var t,n,r;t=new ComparisonItemView({model:e});this.$("#items-list").append(t.render().el);n=getOtherSnippet(e.attributes);r=getDateAvailableSnippet(e.attributes);$("#comparisonOtherItems2-"+e.attributes.DisplayName).html(n);$("#propertyDateAvailable2-"+e.attributes.DisplayName).html(r);displayLeaseStatus("#myComparisonDescription2 #propertyStatus-"+e.attributes.DisplayName,e.attributes.IsLeased,e.attributes.ShowAsNewUntil);displayAmenity(e.attributes.Amenities,"#comparisonAmentityContainer-"+e.attributes.DisplayName);updateComparisonAmenity("div#comparison-list-container")},addAll:function(){comparisonItems.each(this.addOne)}}),routeA,applicationState={currentBaseURL:"http://"+window.location.hostname+"/betterbusiness/",currentScreen:"",currentCity:null,currentRegion:null,currentSubregion:null,currentArea:null,currentBuildingType:null,currentProperty:null,filteredRegions:null,filteredSubregions:null,filteredProperties:null,insideCount:0,setStateBasedOnProperty:function(e){logCallee("applicationState.setStateBasedOnProperty "+e);if(typeof e==="string"){this.currentProperty=properties.propertiesByDisplayName(e)[0].attributes}else{this.currentProperty=e}this.currentCity=cities.citiesByName(this.currentProperty.City)[0].attributes;this.currentRegion=regions.regionsByName(this.currentProperty.Region)[0].attributes;this.currentSubregion=subregions.subregionsByName(this.currentProperty.SubRegion)[0].attributes;this.filteredRegions=new Regions(this.filteredRegions.regionsByCity(this.currentCity.City));this.filteredSubregions=new Subregions(this.filteredSubregions.subregionsByRegion(this.currentRegion.Region));routeA=new google.maps.LatLng(this.currentProperty.Geo.lat,this.currentProperty.Geo.lng);this.currentScreen="displayname"},setStateBasedOnCity:function(e){logCallee("applicationState.setStateBasedOnCity "+e);if(typeof e==="string"){this.currentCity=cities.citiesByName(e)[0].attributes}else{this.currentCity=e}this.currentRegion=null;this.currentSubregion=null;this.currentProperty=null;this.filteredRegions=new Regions(this.filteredRegions.regionsByCity(this.currentCity.City));this.filteredSubregions=new Subregions(this.filteredSubregions.subregionsByCity(this.currentCity.City));this.currentScreen="city"},setStateBasedOnRegion:function(e){logCallee("applicationState.setStateBasedOnRegion "+e);if(typeof e==="string"){this.currentRegion=regions.regionsByName(e)[0].attributes}else{this.currentRegion=e}this.currentCity=cities.citiesByName(this.currentRegion.City)[0].attributes;this.currentSubregion=null;this.currentProperty=null;this.filteredRegions=new Regions(this.filteredRegions.regionsByCity(this.currentCity.City));this.filteredSubregions=new Subregions(this.filteredSubregions.subregionsByRegion(this.currentRegion.Region));this.currentScreen="region"},setStateBasedOnSubregion:function(e){logCallee("applicationState.setStateBasedOnSubregion "+e);if(typeof e==="string"){this.currentSubregion=subregions.subregionsByName(e)[0].attributes}else{this.currentSubregion=e}this.currentCity=cities.citiesByName(this.currentSubregion.City)[0].attributes;this.currentRegion=regions.regionsByName(this.currentSubregion.Region)[0].attributes;this.currentProperty=null;this.filteredRegions=new Regions(this.filteredRegions.regionsByCity(this.currentCity.City));this.filteredSubregions=new Subregions(this.filteredSubregions.subregionsByRegion(this.currentRegion.Region));this.currentScreen="subregion"},setStateBasedOnArea:function(e){logCallee("applicationState.setStateBasedOnArea "+e);if(typeof e==="string"){this.currentArea=areas.areasByName(e)[0].attributes}else{this.currentArea=e}if(this.currentArea.AreaName!=="All"){var t,n,r,i,s;t=new Properties;r=this.filteredProperties.length;for(i=0;i<r;i++){n=this.filteredProperties.models[i].attributes.PropertyRange.split("|");for(s=0;s<n.length;s++){if(this.currentArea.AreaName==n[s]){t.add(this.filteredProperties.models[i].attributes);break}}}this.filteredProperties=t}},setStateBasedOnBuildingType:function(e){logCallee("applicationState.setStateBasedOnBuildingType "+e);if(typeof e==="string"){this.currentBuildingType=buildingtypes.buildingTypesByName(e)[0].attributes}else{this.currentBuildingType=e}if(this.currentBuildingType.BuildingTypeName!="All"){var t,n,r,i,s;n=new Properties;r=this.filteredProperties.length;for(i=0;i<r;i++){t=this.filteredProperties.models[i].attributes.PropertyType.split(",");for(s=0;s<t.length;s++){if(this.currentBuildingType.BuildingTypeName==$.trim(t[s])){n.add(this.filteredProperties.models[i].attributes);break}}}this.filteredProperties=n}},getRouteForThisState:function(){var e="";if(this.currentProperty){e="displayname="+encodeURIComponent(this.currentProperty.DisplayName)}else if(this.currentSubregion){e="subregion="+encodeURIComponent(this.currentSubregion.SubRegion)}else if(this.currentRegion){e="region="+encodeURIComponent(this.currentRegion.Region)}else if(this.currentCity){e="city="+this.currentCity.City}if(this.currentArea){e+="/area="+encodeURIComponent(this.currentArea.AreaName)}if(this.currentBuildingType){e+="/buildingtype="+encodeURIComponent(this.currentBuildingType.BuildingTypeName)}logCallee("applicationState.getRouteForThisState "+e);return e},init:function(){logCallee("applicationState.init");this.currentCity=null;this.currentRegion=null;this.currentSubregion=null;this.currentArea=null;this.currentBuildingType=null;this.currentProperty=null;this.filteredRegions=regions;this.filteredSubregions=subregions;this.filteredProperties=properties;this.insideCount=0;this.currentScreen=""},setCrumbs:function(){var e;if(this.currentCity){e='<span class="title">city</span><span title="'+this.currentCity.City+'">'+this.currentCity.City+'</span><div class="menu-arrow"></div>'}else{e='<span class="title">city</span>city<div class="menu-arrow"></div>'}$("#city-crumb-m").html(e);$("#city-crumb").html(e);if(this.currentRegion){e='<span class="title">region</span><span title="'+this.currentRegion.Region+'">'+this.currentRegion.Region+'</span><div class="menu-arrow"></div>'}else{e='<span class="title">region</span>region<div class="menu-arrow"></div>'}$("#region-crumb-m").html(e);$("#region-crumb").html(e);if(this.currentSubregion){e='<span class="title">suburb</span><span title="'+this.currentSubregion.SubRegion+'">'+this.currentSubregion.SubRegion+'</span><div class="menu-arrow"></div>'}else{e='<span class="title">suburb</span>suburb<div class="menu-arrow"></div>'}$("#subregion-crumb-m").html(e);$("#subregion-crumb").html(e);if(this.currentArea){e='<span class="title">area size</span><span title="'+this.currentArea.AreaName+'">'+this.currentArea.AreaName+'</span><div class="menu-arrow"></div>'}else{e='<span class="title">area size</span>area size<div class="menu-arrow"></div>'}$("#area-crumb-m").html(e);$("#area-crumb").html(e);if(this.currentBuildingType){e='<span class="title">building type</span><span title="'+this.currentBuildingType.BuildingTypeName+'">'+this.currentBuildingType.BuildingTypeName+'</span><div class="menu-arrow"></div>'}else{e='<span class="title">building type</span>building type<div class="menu-arrow"></div>'}$("#buildingtype-crumb-m").html(e);$("#buildingtype-crumb").html(e)},getFeaturedProperties:function(){var e,t,n,r;e=[];t=new Properties;n=properties.length;for(r=0;r<n;r++){if(properties.models[r].attributes.FeaturedIndustrial=="True"||properties.models[r].attributes.FeaturedCommercial=="True"||properties.models[r].attributes.FeaturedDevelopment=="True"){logCallee("featured property: "+properties.models[r].attributes.Region+" "+properties.models[r].attributes.SubRegion+" "+properties.models[r].attributes.DisplayName);if(this.currentSubregion.SubRegion!=properties.models[r].attributes.SubRegion&&this.currentRegion.Region==properties.models[r].attributes.Region){e.push(properties.models[r].attributes.DisplayName);if(e.length>=2){break}}}}for(r=0;r<e.length;r++){t.add(properties.propertiesByDisplayName(e[r])[0].attributes)}if(t.length==0){$("#featured-list-title").hide();$("#featured-list").hide()}else{$("#featured-list-title").show();$("#featured-list").show()}return t}},map=this.map,mapOptions={},boundsChangedHandle,clickHandle,boundsHandle,zoomHandle,maxSouth="-45",maxNorth="-7",maxWest="106",maxEast="162",southWest=new google.maps.LatLng(maxSouth,maxWest),northEast=new google.maps.LatLng(maxNorth,maxEast),allowedBounds=new google.maps.LatLngBounds(southWest,northEast),maxSouth,maxNorth,maxWest,maxEast,southWest,northEast,bounds,currentGeo,placeTypesObject={train_station:{icon:"pins/train.png",grouping:"transport"},university:{icon:"pins/university.png",grouping:"utilities"},gas_station:{icon:"pins/petrol.png",grouping:"utilities"},shopping_mall:{icon:"pins/shopping-mall.png",grouping:"shopping"},atm:{icon:"pins/atm.png",grouping:"utilities"},hospital:{icon:"pins/hospital.png",grouping:"utilities"},post_office:{icon:"pins/post.png",grouping:"utilities"},parking:{icon:"pins/parking.png",grouping:"transport"},store:{icon:"pins/store.png",grouping:"shopping"},bar:{icon:"pins/bar.png",grouping:"food"},cafe:{icon:"pins/cafe.png",grouping:"food"},restaurant:{icon:"pins/restaurant.png",grouping:"food"},airport:{icon:"pins/airport.png",grouping:"transport"},bus_station:{icon:"pins/bus-stop.png",grouping:"transport"},gym:{icon:"pins/gym.png",grouping:"leisure"},movie_theater:{icon:"pins/cinema.png",grouping:"leisure"},office:{icon:"pins/CBD.png",grouping:"custom"},tourism:{icon:"pins/parks.png",grouping:"custom"},rtacam:{icon:"pins/rta.png",grouping:"trafficCameras"}},placeTypesArray=[],placesRequestCount=0,placesRequestCountMax=4,locations={},currentWeightedCentre,directionsDisplay,directionsService,placesRequest,placesService,trafficLayer,fusionTablesLayer,marker,googlePlaceMarker,goodmanPlaceMarker,rtaPlaceMarker,distanceService,routeObject={},routeArray=[],routeNameArray=[],distanceBlurb="",markerA,markerB,routeB,pinkParkStyleMapType,blueRoadStyleMapType,desaturatedStyleMapType,unclutteredStyleMapType,unclutteredStyleMapType2,unclutteredStyleMapType3,retrievedURLs,retrieveURLs;RegionMarker.prototype=new google.maps.OverlayView;RegionMarker.prototype.draw=function(){var e,t,n,r,i,s;e=this;t=this.div;if(!t){n={count:this.propertyCount,location:this.locationName};r=$("#region-marker-item-tmpl").tmpl(n);t=this.div=r[0];google.maps.event.addDomListener(t,"click",function(t){google.maps.event.trigger(e,"click")});i=this.getPanes();i.floatPane.appendChild(t)}s=this.getProjection().fromLatLngToDivPixel(this.latlng);if(s){t.style.left=s.x+"px";t.style.top=s.y+"px"}};RegionMarker.prototype.remove=function(){if(this.div){this.div.parentNode.removeChild(this.div);this.div=null}this.setMap(null)};RegionMarker.prototype.getPosition=function(){return this.latlng};PropertyMarker.prototype=new google.maps.OverlayView;PropertyMarker.prototype.draw=function(){var e,t,n,r,i,s;e=this;t=this.div;if(!t){n={location:this.property.PropertyName};r=$("#property-marker-item-tmpl").tmpl(n);t=this.div=r[0];google.maps.event.addDomListener(t,"click",function(t){google.maps.event.trigger(e,"click")});i=this.getPanes();i.overlayImage.appendChild(t)}s=this.getProjection().fromLatLngToDivPixel(this.latlng);if(s){t.style.left=s.x+"px";t.style.top=s.y-56+"px"}};PropertyMarker.prototype.remove=function(){if(this.div){this.div.parentNode.removeChild(this.div);this.div=null}this.setMap(null)};PropertyMarker.prototype.getPosition=function(){return this.latlng};var navigationRouter;var NavigationRouter=Backbone.Router.extend({routes:{"area=:area":"handleArea","buildingtype=:buildingtype":"handleBuildingType","city=:city":"handleCity","city=:city/area=:area":"handleCityArea","city=:city/buildingtype=:buildingtype":"handleCityBuildingType","city=:city/area=:area/buildingtype=:buildingtype":"handleCityAreaBuildingType","region=:region":"handleRegion","region=:region/area=:area":"handleRegionArea","region=:region/buildingtype=:buildingtype":"handleRegionBuildingType","region=:region/area=:area/buildingtype=:buildingtype":"handleRegionAreaBuildingType","subregion=:subregion":"handleSubregion","subregion=:subregion/area=:area":"handleSubregionArea","subregion=:subregion/buildingtype=:buildingtype":"handleSubregionBuildingType","subregion=:subregion/area=:area/buildingtype=:buildingtype":"handleSubregionAreaBuildingType","displayname=:displayname":"handleProperty","displayname=:displayname/area=:area":"handlePropertyArea","displayname=:displayname/buildingtype=:buildingtype":"handlePropertyBuildingType","displayname=:displayname/area=:area/buildingtype=:buildingtype":"handlePropertyAreaBuildingType",mycomparison:"handleMyComparisonRequest","comparison=:propertiesToCompare":"handleComparisonRequest","route=:AandB":"handleRouteRequest","*actions":"defaultRoute"},initialize:function(e){logCallee("initialize");if(window.location.href.indexOf("#")!=-1){initialRoute=window.location.href.substr(window.location.href.indexOf("#")+1,window.location.href.length)}logCallee("!!!!!!!!!!!!!!initialRoute: "+initialRoute);_gaq.push(["_trackEvent","GBB-URL","#"+initialRoute]);_gaq.push(["_trackPageview","vp/"+initialRoute]);$("*").dblclick(function(e){e.preventDefault()});myComparisonItems=new MyComparisonItemCollection;myComparisonView=new MyComparisonItemCollectionView;for(var t in placeTypesObject)placeTypesArray.push(t);isTouch=$("html").hasClass("touch");is_chrome=navigator.userAgent.indexOf("Chrome")>-1,is_explorer=navigator.userAgent.indexOf("MSIE")>-1,is_firefox=navigator.userAgent.indexOf("Firefox")>-1,is_safari=navigator.userAgent.indexOf("Safari")>-1,is_Opera=navigator.userAgent.indexOf("Presto")>-1;if(is_chrome&&is_safari){is_safari=false}createFooterPanel();return this},handleArea:function(e){logCallee("handleArea area-size="+e);applicationState.init();applicationState.setStateBasedOnArea(decodeURIComponent(e));if(!firstRouteEvent){var t=applicationState.getRouteForThisState();_gaq.push(["_trackEvent","GBB-URL","#"+t]);_gaq.push(["_trackPageview","vp/"+t])}homeScreen();firstRouteEvent=false},handleBuildingType:function(e){logCallee("handleBuildingType building-type="+e);applicationState.init();applicationState.setStateBasedOnBuildingType(decodeURIComponent(e));if(!firstRouteEvent){var t=applicationState.getRouteForThisState();_gaq.push(["_trackEvent","GBB-URL","#"+t]);_gaq.push(["_trackPageview","vp/"+t])}homeScreen();firstRouteEvent=false},handleCity:function(e){logCallee("handleCity "+e);applicationState.init();applicationState.setStateBasedOnCity(decodeURIComponent(e));if(!firstRouteEvent){var t=applicationState.getRouteForThisState();_gaq.push(["_trackEvent","GBB-URL","#"+t]);_gaq.push(["_trackPageview","vp/"+t])}cityScreen();firstRouteEvent=false},handleCityArea:function(e,t){logCallee("handleCityArea "+e+", area-size="+t);applicationState.init();applicationState.setStateBasedOnCity(decodeURIComponent(e));applicationState.setStateBasedOnArea(decodeURIComponent(t));if(!firstRouteEvent){var n=applicationState.getRouteForThisState();_gaq.push(["_trackEvent","GBB-URL","#"+n]);_gaq.push(["_trackPageview","vp/"+n])}cityScreen();firstRouteEvent=false},handleCityBuildingType:function(e,t){logCallee("handleCityBuildingType "+e+", building-type="+t);applicationState.init();applicationState.setStateBasedOnCity(decodeURIComponent(e));applicationState.setStateBasedOnBuildingType(decodeURIComponent(t));if(!firstRouteEvent){var n=applicationState.getRouteForThisState();_gaq.push(["_trackEvent","GBB-URL","#"+n]);_gaq.push(["_trackPageview","vp/"+n])}cityScreen();firstRouteEvent=false},handleCityAreaBuildingType:function(e,t,n){logCallee("handleCityAreaBuildingType "+e+", area-size="+t+", building-type="+n);applicationState.init();applicationState.setStateBasedOnCity(decodeURIComponent(e));applicationState.setStateBasedOnArea(decodeURIComponent(t));applicationState.setStateBasedOnBuildingType(decodeURIComponent(n));if(!firstRouteEvent){var r=applicationState.getRouteForThisState();_gaq.push(["_trackEvent","GBB-URL","#"+r]);_gaq.push(["_trackPageview","vp/"+r])}cityScreen();firstRouteEvent=false},handleRegion:function(e){logCallee("handleRegion "+e);applicationState.init();applicationState.setStateBasedOnRegion(decodeURIComponent(e));if(!firstRouteEvent){var t=applicationState.getRouteForThisState();_gaq.push(["_trackEvent","GBB-URL","#"+t]);_gaq.push(["_trackPageview","vp/"+t])}regionScreen();firstRouteEvent=false},handleRegionArea:function(e,t){logCallee("handleRegionArea "+e+", area-size="+t);applicationState.init();applicationState.setStateBasedOnRegion(decodeURIComponent(e));applicationState.setStateBasedOnArea(decodeURIComponent(t));if(!firstRouteEvent){var n=applicationState.getRouteForThisState();_gaq.push(["_trackEvent","GBB-URL","#"+n]);_gaq.push(["_trackPageview","vp/"+n])}regionScreen();firstRouteEvent=false},handleRegionBuildingType:function(e,t){logCallee("handleRegionBuildingType "+e+", building-type="+t);applicationState.init();applicationState.setStateBasedOnRegion(decodeURIComponent(e));applicationState.setStateBasedOnBuildingType(decodeURIComponent(t));if(!firstRouteEvent){var n=applicationState.getRouteForThisState();_gaq.push(["_trackEvent","GBB-URL","#"+n]);_gaq.push(["_trackPageview","vp/"+n])}regionScreen();firstRouteEvent=false},handleRegionAreaBuildingType:function(e,t,n){logCallee("handleRegionAreaBuildingType "+e+", area-size="+t+", building-type="+n);applicationState.init();applicationState.setStateBasedOnRegion(decodeURIComponent(e));applicationState.setStateBasedOnArea(decodeURIComponent(t));applicationState.setStateBasedOnBuildingType(decodeURIComponent(n));if(!firstRouteEvent){var r=applicationState.getRouteForThisState();_gaq.push(["_trackEvent","GBB-URL","#"+r]);_gaq.push(["_trackPageview","vp/"+r])}regionScreen();firstRouteEvent=false},handleSubregion:function(e){logCallee("handleSubregion "+e);applicationState.init();applicationState.setStateBasedOnSubregion(decodeURIComponent(e));if(!firstRouteEvent){var t=applicationState.getRouteForThisState();_gaq.push(["_trackEvent","GBB-URL","#"+t]);_gaq.push(["_trackPageview","vp/"+t])}subregionScreen();firstRouteEvent=false},handleSubregionArea:function(e,t){logCallee("handleSubregionArea "+e+", area-size="+t);applicationState.init();applicationState.setStateBasedOnSubregion(decodeURIComponent(e));applicationState.setStateBasedOnArea(decodeURIComponent(t));if(!firstRouteEvent){var n=applicationState.getRouteForThisState();_gaq.push(["_trackEvent","GBB-URL","#"+n]);_gaq.push(["_trackPageview","vp/"+n])}subregionScreen();firstRouteEvent=false},handleSubregionBuildingType:function(e,t){logCallee("handleSubregionBuildingType "+e+", building-type="+t);applicationState.init();applicationState.setStateBasedOnSubregion(decodeURIComponent(e));applicationState.setStateBasedOnBuildingType(decodeURIComponent(t));if(!firstRouteEvent){var n=applicationState.getRouteForThisState();_gaq.push(["_trackEvent","GBB-URL","#"+n]);_gaq.push(["_trackPageview","vp/"+n])}subregionScreen();firstRouteEvent=false},handleSubregionAreaBuildingType:function(e,t,n){logCallee("handleSubregionAreaBuildingType "+e+", area-size="+t+", building-type="+n);applicationState.init();applicationState.setStateBasedOnSubregion(decodeURIComponent(e));applicationState.setStateBasedOnArea(decodeURIComponent(t));applicationState.setStateBasedOnBuildingType(decodeURIComponent(n));if(!firstRouteEvent){var r=applicationState.getRouteForThisState();_gaq.push(["_trackEvent","GBB-URL","#"+r]);_gaq.push(["_trackPageview","vp/"+r])}subregionScreen();firstRouteEvent=false},handleProperty:function(e){logCallee("handleProperty "+e);applicationState.init();applicationState.setStateBasedOnProperty(decodeURIComponent(e));if(!firstRouteEvent){var t=applicationState.getRouteForThisState();_gaq.push(["_trackEvent","GBB-URL","#"+t]);_gaq.push(["_trackPageview","vp/"+t])}propertyScreen();firstRouteEvent=false},handlePropertyArea:function(e,t){logCallee("handlePropertyArea "+e+", area-size="+t);applicationState.init();applicationState.setStateBasedOnProperty(decodeURIComponent(e));applicationState.setStateBasedOnArea(decodeURIComponent(t));if(!firstRouteEvent){var n=applicationState.getRouteForThisState();_gaq.push(["_trackEvent","GBB-URL","#"+n]);_gaq.push(["_trackPageview","vp/"+n])}propertyScreen();firstRouteEvent=false},handlePropertyBuildingType:function(e,t){logCallee("handlePropertyBuildingType "+e+", building-type="+t);applicationState.init();applicationState.setStateBasedOnProperty(decodeURIComponent(e));applicationState.setStateBasedOnBuildingType(decodeURIComponent(t));if(!firstRouteEvent){var n=applicationState.getRouteForThisState();_gaq.push(["_trackEvent","GBB-URL","#"+n]);_gaq.push(["_trackPageview","vp/"+n])}propertyScreen();firstRouteEvent=false},handlePropertyAreaBuildingType:function(e,t,n){logCallee("handlePropertyAreaBuildingType "+e+", area-size="+t+", building-type="+n);applicationState.init();applicationState.setStateBasedOnProperty(decodeURIComponent(e));applicationState.setStateBasedOnArea(decodeURIComponent(t));applicationState.setStateBasedOnBuildingType(decodeURIComponent(n));if(!firstRouteEvent){var r=applicationState.getRouteForThisState();_gaq.push(["_trackEvent","GBB-URL","#"+r]);_gaq.push(["_trackPageview","vp/"+r])}propertyScreen();firstRouteEvent=false},handleMyComparisonRequest:function(){logCallee("handleMyComparisonRequest");if(!firstRouteEvent){_gaq.push(["_trackEvent","GBB-URL","#mycomparison"]);_gaq.push(["_trackPageview","vp/mycomparison"])}myComparisonScreen();firstRouteEvent=false},handleComparisonRequest:function(e){logCallee("handleComparisonRequest "+e);if(!firstRouteEvent){_gaq.push(["_trackEvent","GBB-URL","#comparison="+e]);_gaq.push(["_trackPageview","vp/comparison="+e])}applicationState.init();comparisonScreen(e);firstRouteEvent=false},handleRouteRequest:function(e){logCallee("handleRouteRequest "+e);if(!firstRouteEvent){_gaq.push(["_trackEvent","GBB-URL","#route="+e]);_gaq.push(["_trackPageview","vp/route="+e])}routeRequestScreen(e);firstRouteEvent=false},defaultRoute:function(){logCallee("defaultRoute ");if(firstRouteEvent){getGeolocatedSubregion()}else{_gaq.push(["_trackEvent","GBB-URL","#"]);_gaq.push(["_trackPageview","vp/"]);homeRoute()}}});this.contactUsValidate=function(){var e="";if(document.getElementById("gbb_sender_first_name").value==""){e+="<p>please enter your first name</p>"}if(document.getElementById("gbb_sender_last_name").value==""){e+="<p>please enter your last name</p>"}if(document.getElementById("gbb_sender_company").value==""){e+="<p>please enter your company</p>"}var t=document.getElementById("gbb_sender_email").value;if(!validateEmail(t)){e+="<p>please enter a valid email</p>"}if(document.getElementById("gbb_sender_message").value==""){e+="<p>please enter your message</p>"}if(e!=""){document.getElementById("gbbMessage").innerHTML=e}else{var n=goodmanwebsite.ws.email.sendMail(document.getElementById("gbb_sender_first_name").value,document.getElementById("gbb_sender_last_name").value,document.getElementById("gbb_sender_company").value,document.getElementById("gbb_sender_email").value,document.getElementById("gbb_sender_message").value,OnComplete,OnTimeOut,OnError);document.getElementById("gbbMessage").innerHTML="email sent."}};this.emailPropertyValidate=function(){var e="";if(document.getElementById("gbb_ep_recipient_name").value==""){e+="<p>please enter recipient's name</p>"}var t=document.getElementById("gbb_ep_recipient_email").value;if(!validateEmail(t)){e+="<p>please enter a valid recipient email</p>"}if(document.getElementById("gbb_ep_sender_name").value==""){e+="<p>please enter your name</p>"}t=document.getElementById("gbb_ep_sender_email").value;if(!validateEmail(t)){e+="<p>please enter a valid sender email</p>"}if(e!=""){document.getElementById("gbbMessageEP").innerHTML=e}else{_gaq.push(["_trackEvent","Email a colleague",applicationState.currentProperty.DisplayName]);if(firstEventForSession){_gaq.push(["_trackEvent","firstEventForSession","Email a colleague"]);firstEventForSession=false}var n="";n+=applicationState.currentProperty.Thumbnail+"|";n+=applicationState.currentProperty.PropertyName+"|";n+=applicationState.currentProperty.PropertyAddress1+"|";n+=applicationState.currentProperty.SubRegion+"|";n+=applicationState.currentProperty.PropertyType+"|";n+=applicationState.currentProperty.PropertySize+"|";n+=applicationState.currentProperty.Contact1.split(",")[0]+"|";n+=applicationState.currentProperty.Contact1.split(",")[1]+"|";n+=applicationState.currentProperty.Contact1.split(",")[2]+"|";n+=applicationState.currentBaseURL+_basePage+"#displayname="+applicationState.currentProperty.DisplayName+"";var r=goodmanwebsite.ws.email.sendPropertyMail(document.getElementById("gbb_ep_recipient_name").value,document.getElementById("gbb_ep_recipient_email").value,document.getElementById("gbb_ep_sender_name").value,document.getElementById("gbb_ep_sender_email").value,document.getElementById("gbb_ep_note").value,n,OnCompleteEP,OnTimeOut,OnError);document.getElementById("gbbMessageEP").innerHTML="email sent."}};this.emailComparisonValidate=function(){var e="";if(document.getElementById("gbb_ec_recipient_name").value==""){e+="<p>please enter recipient's name</p>"}var t=document.getElementById("gbb_ec_recipient_email").value;if(!validateEmail(t)){e+="<p>please enter a valid recipient email</p>"}if(document.getElementById("gbb_ec_sender_name").value==""){e+="<p>please enter your name</p>"}t=document.getElementById("gbb_ec_sender_email").value;if(!validateEmail(t)){e+="<p>please enter a valid sender email</p>"}if(e!=""){document.getElementById("gbbMessageEC").innerHTML=e}else{var n="";var r=applicationState.currentBaseURL+_basePage+"#comparison=";for(var i=0;i<myComparisonItems.length;i++){n+=myComparisonItems.models[i].attributes.Thumbnail+"|";n+=myComparisonItems.models[i].attributes.PropertyName+"|";n+=myComparisonItems.models[i].attributes.PropertyAddress1+"|";n+=myComparisonItems.models[i].attributes.SubRegion+"|";n+=myComparisonItems.models[i].attributes.PropertyType+"|";n+=myComparisonItems.models[i].attributes.PropertySize+"|";n+=myComparisonItems.models[i].attributes.Contact1.split(",")[0]+"|";n+=myComparisonItems.models[i].attributes.Contact1.split(",")[1]+"|";n+=myComparisonItems.models[i].attributes.Contact1.split(",")[2]+"|";n+=applicationState.currentBaseURL+_basePage+"#displayname="+myComparisonItems.models[i].attributes.DisplayName;r+=myComparisonItems.models[i].attributes.DisplayName;if(i<myComparisonItems.length-1){n+="*";r+=","}}_gaq.push(["_trackEvent","Email a colleague",r]);if(firstEventForSession){_gaq.push(["_trackEvent","firstEventForSession","Email a colleague"]);firstEventForSession=false}var s=goodmanwebsite.ws.email.sendComparisonMail(document.getElementById("gbb_ec_recipient_name").value,document.getElementById("gbb_ec_recipient_email").value,document.getElementById("gbb_ec_sender_name").value,document.getElementById("gbb_ec_sender_email").value,document.getElementById("gbb_ec_note").value,n,r,OnCompleteEC,OnTimeOut,OnError);document.getElementById("gbbMessageEC").innerHTML="email sent."}};this.init=function(){logCallee("init");initWidgits();createCollections();initializeMap();if(localJSONEnabled())loadPropertiesLocally()}};$(document).ready(function(){GBB.init()});var isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows()}}